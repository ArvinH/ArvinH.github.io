{"componentChunkName":"component---src-templates-post-tsx","path":"/tech/custom-react-renderer-pttx","result":{"data":{"markdownRemark":{"html":"<blockquote>\n<p>ã€é¡˜ä½ é¤˜ç”Ÿæ‰€æœ‰çš„çæƒœéƒ½ä¸ç”¨é å¤±å»ä¾†æ‡‚å¾—ã€‚ã€</p>\n</blockquote>\n<!-- more -->\n<h1 id=\"å‰è¨€\" style=\"position:relative;\"><a href=\"#%E5%89%8D%E8%A8%80\" aria-label=\"å‰è¨€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>å‰è¨€</h1>\n<p>æœ€è¿‘å› ç‚ºæ­¦æ¼¢è‚ºç‚çš„é—œä¿‚ï¼Œå…¬å¸å±•é–‹äº†ä¸çŸ¥å¾—æŒçºŒå¤šä¹…çš„ Work From Home æ”¿ç­–ï¼Œé›–ç„¶åœ˜éšŠè£¡æœ‰äº›äººä¸å¤ªå–œæ­¡ï¼Œè¦ºå¾—é€™æ¨£æºé€šèˆ‡é–‹æœƒæ•ˆç‡æ¯”ä¸ä¸Šåœ¨è¾¦å…¬å®¤é¢å°é¢ï¼Œä½†æˆ‘å€‹äººæ˜¯é‚„è »ç¿’æ…£çš„ï¼Œä¸¦ä¸”ï¼Œé€™ç¯€çœä¸‹ä¾†çš„é€šå‹¤æ™‚é–“ï¼Œå‰›å¥½è®“æˆ‘å¯ä»¥å¤šçœ‹ä¸€äº›å½±ç‰‡è·Ÿç©ç© side projectã€‚é€™æ¬¡åœ¨è£œå¸¶ React Conf 2019 çš„å½±ç‰‡æ™‚ï¼Œçœ‹åˆ°å‰ React team çš„ EM, Sophie Alpert ä»‹ç´¹ <a href=\"https://www.youtube.com/watch?v=CGpMlWVcHok\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Building a Custom React Renderer</a>ï¼ŒåŠ ä¸Š side project ç”¨ä¸Šäº† <a href=\"https://github.com/vadimdemedes/ink\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ink</a> é€™å€‹èƒ½ç”¨ React æ’°å¯« command line å·¥å…·çš„å¥—ä»¶ï¼Œè®“æˆ‘æ±ºå®šé€éå¯¦éš›æ“ä½œä¾†äº†è§£ä½•è¬‚ Custom React Rendererï¼Œä»¥åŠè©²å¦‚ä½•æ‰“é€ ã€‚é™¤äº† Sophie Alpert çš„å½±ç‰‡å¤–ï¼ŒåŸºæœ¬ä¸Šæ˜¯åƒè€ƒ <a href=\"https://github.com/nitin42/Making-a-custom-React-renderer\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">@nitin42 çš„é€™ä»½æ•™å­¸</a>ï¼Œä»¥ <a href=\"https://github.com/Ziv-Barber/officegen\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">officegen</a> ä½œç‚º React Component çš„ host environmentï¼Œè®“æˆ‘å€‘èƒ½ç”¨æ’°å¯« React çš„æ–¹å¼ä¾†è£½ä½œ pptx æŠ•å½±ç‰‡ï¼</p>\n<h1 id=\"react-reconciliation-èˆ‡-renderer\" style=\"position:relative;\"><a href=\"#react-reconciliation-%E8%88%87-renderer\" aria-label=\"react reconciliation èˆ‡ renderer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>React Reconciliation èˆ‡ Renderer</h1>\n<p>React çš„æ¶æ§‹ä¸­æœ‰å…©å€‹ä¸»è¦çš„é‡å¿ƒï¼Œ<strong>reconciliation</strong> èˆ‡ <strong>rendering</strong>ã€‚<strong>reconciliation</strong> æ˜¯ React ç”¨ä¾†æ‰¾å‡ºç‹€æ…‹æ”¹è®Šå‰å¾Œï¼Œå…¶ UI æ¨¹ç‹€çµæ§‹å·®ç•°çš„æ¼”ç®—æ³•ï¼Œä¸¦æ±ºå®šå“ªä¸€éƒ¨åˆ†çš„ç¯€é»æ˜¯éœ€è¦è¢«æ›´å‹•çš„ï¼Œä¹Ÿå°±æ˜¯å¸‚é¢ä¸Šæµå‚³æ‰€è¬‚ <code class=\"language-text\">Virtual DOM</code> çš„æ ¸å¿ƒæ¦‚å¿µã€‚ä½†å¯¦éš›ä¸Šæ‰€è¬‚ <code class=\"language-text\">Virtual DOM</code> é€™å€‹åè©æœ‰é»èª¤ç”¨ï¼Œå› ç‚ºåœ¨ <strong>reconciliation</strong> çš„æ¼”ç®—æ³•èˆ‡å®šç¾©ä¸­ï¼Œå®Œå…¨ä¸æ¶‰åŠ <strong>DOM</strong>ï¼Œ<strong>DOM</strong> åªæ˜¯ React reconciliation å¯ä»¥å¥—ç”¨çš„å…¶ä¸­ä¸€å€‹ <strong>Host Environment</strong>ï¼Œ<strong>rendering</strong> çš„éç¨‹æœƒä¾æ“š <strong>reconiliation</strong> çš„çµæœï¼Œæ­é…æ‰€åœ¨çš„ <strong>Host Environment</strong> ä¾†æ¸²æŸ“å‡ºç›¸å°æ‡‰çš„ç•«é¢ï¼Œé€™å°±æ˜¯ <strong>Renderer</strong> æ‰€è² è²¬çš„ã€‚ä¾‹å¦‚ <code class=\"language-text\">React-Native</code> å°±æ˜¯ <strong>Host Environment</strong> ç‚º iOSã€Android å¹³å°çš„ä¸€ç¨® Rendererï¼Œç•¶ç„¶ <code class=\"language-text\">react-dom</code> ä¹Ÿæ˜¯ã€‚</p>\n<p>é€™å€‹æ¶æ§‹è€æ—©å°±å­˜åœ¨æ–¼ React çš„æ ¸å¿ƒä¸­ï¼Œç•¶åˆ Fiber æ¶æ§‹å°±æ˜¯åœ¨æ”¹å–„ <strong>reconciliation</strong> çš„å¯¦ä½œæ–¹å¼ï¼ˆç•¶ç„¶ä¹Ÿæœ‰å½±éŸ¿ renderer çš„å¯¦ä½œï¼‰ï¼Œä¹Ÿæœ‰è¨±å¤šæ–‡ç« åœ¨æ¢è¨èˆ‡èªªæ˜ã€‚</p>\n<p>åªæ˜¯è¼ƒå°‘ç‚ºäººçŸ¥çš„æ˜¯ï¼ŒRect å…¶å¯¦æœ‰ä¸€å€‹ <code class=\"language-text\">react-reconciler</code> çš„å¥—ä»¶å¯ä»¥ä½¿ç”¨ï¼Œå¹«ä½ è™•ç†å¥½ reconciliation çš„éƒ¨åˆ†ï¼Œæä¾›ä¸€äº›ä»‹é¢è®“ä½ æ ¹æ“šæƒ³è¦çš„ host environment å¯¦ä½œ renderingï¼Œè€Œé€™å°±æ˜¯ç‚ºä»€éº¼æœ‰äººèƒ½å®¢è£½åŒ–å„ç¨® rendererï¼Œè®“å¤§å®¶èƒ½ç”¨ React æ’°å¯« VRã€Command Line æˆ–æ˜¯ ç­‰ç­‰ï¼ˆå¯åƒè€ƒæ­¤ <a href=\"https://github.com/chentsulin/awesome-react-renderer\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">awesome list</a>ï¼‰ã€‚</p>\n<p>é—œæ–¼ Fiber æ¶æ§‹çš„è§€å¿µä»‹ç´¹ï¼Œæ¨è–¦å¤§å®¶å»çœ‹ <a href=\"https://twitter.com/acdlite?lang=en\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Andrew Clark</a> çš„<a href=\"https://github.com/acdlite/react-fiber-architecture\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">æ–‡ç« </a>ï¼Œé›–ç„¶æ˜¯å¾ˆä¹…ä¹‹å‰å¯«çš„ï¼Œä½†æˆ‘è¦ºå¾—è§€å¿µé—¡è¿°çš„å¾ˆæ¸…æ™°æ˜“æ‡‚ã€‚</p>\n<p>ç°¡å–®ä¾†èªªï¼Œæ‰€è¬‚çš„ fiber æ˜¯åœ¨ reconciliation ä¸­çš„ä¸€å€‹å·¥ä½œå–®ä½ï¼Œä¸€å€‹ fiber æ˜¯ä¸€å€‹ JavaScript objectï¼ŒåŒ…å«è‘—ä¸€å€‹ Component çš„è³‡è¨Šï¼Œå…¶è¼¸å…¥èˆ‡è¼¸å‡ºï¼Œåœ¨æ¥ä¸‹ä¾†çš„å¯¦ä½œä¸­ï¼Œæˆ‘å€‘æœƒåˆ©ç”¨ <code class=\"language-text\">react-reconciler</code> èˆ‡ fiber æ‰€æä¾›çš„ Component è³‡è¨Šä¾†å¯¦ä½œä¸€å€‹å®¢è£½åŒ– PPTXRendererã€‚</p>\n<h2 id=\"æœ€çµ‚çš„çµæœ\" style=\"position:relative;\"><a href=\"#%E6%9C%80%E7%B5%82%E7%9A%84%E7%B5%90%E6%9E%9C\" aria-label=\"æœ€çµ‚çš„çµæœ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>æœ€çµ‚çš„çµæœ</h2>\n<p>å…ˆçœ‹ä¸€ä¸‹æœ€çµ‚çš„æˆå“åŠŸèƒ½ï¼Œé€™æ¨£åœ¨èªªæ˜å¾Œé¢çš„å¯¦ä½œæ™‚ï¼Œæ‡‰è©²æœƒæ¯”è¼ƒæœ‰æ„Ÿå—ã€‚</p>\n<p>é€™æ¬¡ç¯„ä¾‹ä¸­æ‰€å®¢è£½åŒ–çš„ PPTXRenderer å¯ä»¥è®“æˆ‘å€‘ä½¿ç”¨å…©å€‹ Componentï¼š<code class=\"language-text\">&lt;Slide></code> èˆ‡ <code class=\"language-text\">&lt;Text></code> ä¾†ç”¢ç”ŸæŠ•å½±ç‰‡ã€‚</p>\n<p>ä¾‹å¦‚åœ¨ <code class=\"language-text\">App.js</code> ä¸­é€™æ¨£å¯«ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Component <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Text<span class=\"token punctuation\">,</span> Slide<span class=\"token punctuation\">,</span> render <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'../src'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>React<span class=\"token punctuation\">.</span>Fragment<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>Slide<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>Text<span class=\"token operator\">></span>Slide <span class=\"token number\">1</span> ğŸ˜ ğŸ˜<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Text<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Slide<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>Slide<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>Text<span class=\"token operator\">></span>Slide <span class=\"token number\">2</span> ğŸ˜ ğŸ˜<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Text<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Slide<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>React<span class=\"token punctuation\">.</span>Fragment<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>App <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>__dirname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/text.pptx</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>æœƒç”¢ç”Ÿé€™æ¨£çš„æŠ•å½±ç‰‡ï¼š</p>\n<p><img src=\"https://static.coderbridge.com/img/ArvinH/29dd4226b9c0462bb75ef278795ee337.gif\" alt=\"demo\"></p>\n<blockquote>\n<p>TL;DR\nç¯‡å¹…æœ‰é»é•·ï¼Œå¾ˆå¤šç¨‹å¼ç¢¼ï¼Œè‹¥ä¸æƒ³çœ‹æ–‡ç« ï¼Œå¯ä»¥ç›´æ¥åƒè€ƒç¨‹å¼ç¢¼ <a href=\"https://github.com/ArvinH/reapptx\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">reapptx</a></p>\n</blockquote>\n<h1 id=\"custom-renderer-åŸºæœ¬çµæ§‹\" style=\"position:relative;\"><a href=\"#custom-renderer-%E5%9F%BA%E6%9C%AC%E7%B5%90%E6%A7%8B\" aria-label=\"custom renderer åŸºæœ¬çµæ§‹ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Custom Renderer åŸºæœ¬çµæ§‹</h1>\n<p><code class=\"language-text\">react-reconciler</code> æä¾›çš„å‡½å¼å¯ä»¥æ¥å—ä¸€å€‹ <strong>host config object</strong>ï¼Œä¸¦å›å‚³ renderer instanceã€‚å…¶ä¸­ <strong>host config object</strong> æ˜¯æˆ‘å€‘ç”¨ä¾†å®šç¾©èˆ‡å¯¦ä½œåœ¨ renderer çš„ lifecycle ä¸­æ‰€éœ€è¦çš„ methodï¼ŒåŒ…å« <code class=\"language-text\">update</code>ã€<code class=\"language-text\">append children</code>ã€<code class=\"language-text\">remove children</code> ç­‰ç­‰ï¼Œé€™é‚Šæ‰€è™•ç†çš„é€šé€šéƒ½æ˜¯ <strong>host environment</strong> åº•ä¸‹çš„ componentsï¼Œå…¶é¤˜ non-host çš„ components éƒ½æœƒç”± React è² è²¬ç®¡ç†ã€‚</p>\n<p>å…ˆçœ‹çœ‹ <code class=\"language-text\">react-reconciler</code> Readme å…§æä¾›çš„ç¯„ä¾‹ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> Reconciler <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-reconciler\"</span>\n\n<span class=\"token keyword\">const</span> HostConfig <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// You'll need to implement some methods here.</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> MyRenderer <span class=\"token operator\">=</span> <span class=\"token function\">Reconciler</span><span class=\"token punctuation\">(</span>HostConfig<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> RendererPublicAPI <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">element<span class=\"token punctuation\">,</span> container<span class=\"token punctuation\">,</span> callback</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> MyRendererContainer <span class=\"token operator\">=</span> MyRenderer<span class=\"token punctuation\">.</span><span class=\"token function\">createContainer</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// Call MyRenderer.updateContainer() to schedule changes on the roots.</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> RendererPublicAPI<span class=\"token punctuation\">;</span></code></pre></div>\n<p>é‚„è¨˜å¾—ä½ ä¸€èˆ¬é–‹ç™¼ react app æ™‚ï¼Œéƒ½æœƒå‘¼å« <code class=\"language-text\">ReactDOM.render</code> ä¾†å°‡ä½ çš„ root component æ›è¼‰åˆ°ä¸€å€‹ <code class=\"language-text\">div</code> ä¸Šé ­å—ï¼Ÿä¸Šè¿°ç¨‹å¼ç¢¼ä¸­æ‰€ export çš„ <code class=\"language-text\">RenderPublicAPI.render</code> å°±ç­‰åŒæ–¼ <code class=\"language-text\">ReactDOM.render</code>ã€‚</p>\n<p>è€Œåœ¨ <code class=\"language-text\">render</code> å‡½å¼ä¸­ï¼Œç”± <code class=\"language-text\">HostConfig</code> èˆ‡ <code class=\"language-text\">react-conciler</code> æ‰€å»ºæ§‹çš„ custom renderer å°±å¯ä»¥å°‡ React component æ‡‰ç”¨åœ¨ä¸åŒçš„ host environment ä¸­ã€‚</p>\n<p>è‡³æ–¼å¦‚ä½•å¯¦ä½œ <code class=\"language-text\">HostConfig</code>ï¼Œé€™é‚Šæœ‰<a href=\"https://github.com/facebook/react/blob/master/packages/react-reconciler/src/forks/ReactFiberHostConfig.custom.js\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">å®Œæ•´çš„ method åˆ—è¡¨</a>ï¼Œä½ ä¹Ÿå¯ä»¥åƒè€ƒ <a href=\"https://github.com/facebook/react/blob/master/packages/react-dom/src/client/ReactDOMHostConfig.js\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">react-dom</code></a> æˆ– <a href=\"https://github.com/facebook/react/blob/master/packages/react-native-renderer/src/ReactNativeHostConfig.js\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"><code class=\"language-text\">react-native</code> çš„ HostConfig</a>ã€‚</p>\n<p>ä¸éå¾åˆ—è¡¨ä¸­æ´‹æ´‹ç‘ç‘ä¸€å † interfaceï¼Œåˆ°åº•å“ªäº›æ˜¯é‡è¦çš„å‘¢ï¼Ÿ</p>\n<p>æˆ‘å€‘å¯ä»¥åˆ©ç”¨ä¸€å€‹æ–¹å¼ä¾†æ¸¬è©¦ï¼Œå…ˆæŠŠåŸæœ¬ä½¿ç”¨ <code class=\"language-text\">react-dom</code> çš„ renderer æ›æˆä½ è‡ªå·±çš„ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\">import React from \"react\";\n<span class=\"token inserted-sign inserted\"><span class=\"token prefix inserted\">+</span>// import ReactDOM from \"react-dom\";\n<span class=\"token prefix inserted\">+</span>import MyRenderer from \"./MyRenderer\";\n</span>\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\n<span class=\"token deleted-sign deleted\"><span class=\"token prefix deleted\">-</span>ReactDOM.render(\n</span><span class=\"token inserted-sign inserted\"><span class=\"token prefix inserted\">+</span>MyRenderer.render(\n</span><span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span> &lt;React.StrictMode>\n<span class=\"token prefix unchanged\"> </span>   &lt;App />\n<span class=\"token prefix unchanged\"> </span> &lt;/React.StrictMode>,\n<span class=\"token prefix unchanged\"> </span> rootElement\n</span>);</code></pre></div>\n<p>è€Œåœ¨ <code class=\"language-text\">MyRenderer.js</code> ä¸­ï¼Œå°‡å„å€‹å‡½å¼ä¸€å€‹ä¸€å€‹æ”¾ä¸Šå»ï¼Œä¸¦åŠ ä¸Š logï¼Œç›´åˆ°ä½ çš„é é¢æ²’æœ‰å‡ºç¾ errorï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> Reconciler <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-reconciler\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> HostConfig <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">appendInitialChild</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token operator\">...</span>args</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"appendInitialChild\"</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token function\">createInstance</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token operator\">...</span>args</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"createInstance\"</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token function\">createTextInstance</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token operator\">...</span>args</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"createTextInstance\"</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span>args<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// ... ä¾æ­¤é¡æ¨å°‡å„ç¨® method éƒ½æ”¾ä¸Šå»ï¼Œä¸¦åŠ ä¸Š log</span>\n  <span class=\"token comment\">// ...</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> MyRenderer <span class=\"token operator\">=</span> <span class=\"token function\">Reconciler</span><span class=\"token punctuation\">(</span>HostConfig<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> RendererPublicAPI <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">element<span class=\"token punctuation\">,</span> container</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// render function ä¸­çš„å…§å®¹å‰‡åƒè€ƒ react-conciler çš„ readme</span>\n    <span class=\"token comment\">// å°‡ renderer çš„ container å‰µå»ºå‡ºä¾†ï¼Œä¸¦å°‡å‚³å…¥çš„ element update ä¸Šå»ã€‚</span>\n    <span class=\"token keyword\">const</span> MyRendererContainer <span class=\"token operator\">=</span> MyRenderer<span class=\"token punctuation\">.</span><span class=\"token function\">createContainer</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    MyRenderer<span class=\"token punctuation\">.</span><span class=\"token function\">updateContainer</span><span class=\"token punctuation\">(</span>element<span class=\"token punctuation\">,</span> MyRendererContainer<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> RendererPublicAPI<span class=\"token punctuation\">;</span></code></pre></div>\n<p>é€™æ™‚ä½ çš„é é¢æ‡‰è©²æœƒæ˜¯ç©ºç™½çš„ï¼Œå› ç‚ºä½ æ‰€æœ‰ renderer çš„ method éƒ½å°šæœªå¯¦ä½œã€‚ä½†å¦‚æ­¤ä¸€ä¾†å°±èƒ½è§€å¯Ÿå‡ºåœ¨ä½ çš„ <code class=\"language-text\">&lt;App /></code> component ä¸­ï¼Œrenderer æœƒèª¿ç”¨å“ªäº›å‡½æ•¸ã€åŸ·è¡Œé †åºç‚ºä½•ã€å€‹åˆ¥çš„åƒæ•¸æ˜¯ä»€éº¼ã€‚</p>\n<p>é€™é‚Šçµ¦å¤§å®¶ä¸€å€‹ codesandbox çš„ä¾‹å­æŠŠç©ï¼š</p>\n<iframe\n  src=\"https://codesandbox.io/embed/youthful-shaw-cinj5?fontsize=14&hidenavigation=1&theme=dark\"\n  style=\"width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;\"\n  title=\"custom-react-renderer-check-func-order\"\n  allow=\"geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media; usb\"\n  sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"></iframe>\n<h2 id=\"å¯¦éš›çš„-host-config\" style=\"position:relative;\"><a href=\"#%E5%AF%A6%E9%9A%9B%E7%9A%84-host-config\" aria-label=\"å¯¦éš›çš„ host config permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>å¯¦éš›çš„ Host Config</h2>\n<p>åˆæ­¥äº†è§£ Renderer çš„çµæ§‹èˆ‡éœ€è¦å¡«å…¥çš„ Host Config å¾Œï¼Œæˆ‘å€‘å¯ä»¥ä¾†å¯¦ä½œéœ€è¦çš„ methodï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> Reconciler <span class=\"token keyword\">from</span> <span class=\"token string\">'react-reconciler'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> hostConfig <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">appendInitialChild</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">parentInstance<span class=\"token punctuation\">,</span> child</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>parentInstance<span class=\"token punctuation\">.</span>appendChild<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      parentInstance<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token function\">createInstance</span><span class=\"token punctuation\">(</span>\n    <span class=\"token parameter\">type<span class=\"token punctuation\">,</span>\n    props<span class=\"token punctuation\">,</span>\n    rootContainerInstance<span class=\"token punctuation\">,</span>\n    hostContext<span class=\"token punctuation\">,</span>\n    internalInstanceHandle</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token constant\">COMPONENTS</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function-variable function\">ROOT</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PPTXDocument</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">TEXT</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Text</span><span class=\"token punctuation\">(</span>rootContainerInstance<span class=\"token punctuation\">,</span> props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function-variable function\">SLIDE</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Slide</span><span class=\"token punctuation\">(</span>rootContainerInstance<span class=\"token punctuation\">,</span> props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token keyword\">undefined</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token constant\">COMPONENTS</span><span class=\"token punctuation\">[</span>type<span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token constant\">COMPONENTS</span><span class=\"token punctuation\">.</span>default<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token function\">getRootHostContext</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">instance</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span> \n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token function\">getChildHostContext</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">parentHostContext<span class=\"token punctuation\">,</span> type<span class=\"token punctuation\">,</span> rootContainerInstance</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token function\">shouldSetTextContent</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">type<span class=\"token punctuation\">,</span> props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token function\">createTextInstance</span><span class=\"token punctuation\">(</span>\n    <span class=\"token parameter\">text<span class=\"token punctuation\">,</span>\n    rootContainerInstance<span class=\"token punctuation\">,</span>\n    hostContext<span class=\"token punctuation\">,</span>\n    internalInstanceHandle</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> text<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token function\">finalizeInitialChildren</span><span class=\"token punctuation\">(</span>\n    <span class=\"token parameter\">parentInstance<span class=\"token punctuation\">,</span>\n    type<span class=\"token punctuation\">,</span>\n    props<span class=\"token punctuation\">,</span>\n    rootContainerInstance<span class=\"token punctuation\">,</span>\n    hostContext</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token function\">getPublicInstance</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">inst</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> inst<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token function\">prepareForCommit</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">rootcontainerInfo</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">/* noop */</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token function\">resetAfterCommit</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">rootcontainerInfo</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">/* noop */</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token function\">appendChildToContainer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">container<span class=\"token punctuation\">,</span> child</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">/* noop */</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token function\">removeChildFromContainer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">container<span class=\"token punctuation\">,</span> child</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">/* noop */</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token function-variable function\">now</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  supportsMutation<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> PPTXRenderer <span class=\"token operator\">=</span> <span class=\"token function\">Reconciler</span><span class=\"token punctuation\">(</span>hostConfig<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>æœ‰è¨±å¤š function æ˜¯å¿…è¦ä½†æˆ‘å€‘çš„ç¯„ä¾‹ä¸­ç”¨ä¸è‘—çš„ï¼Œæ‰€ä»¥ç•™ç©ºï¼Œä¸éæˆ‘é‚„æ˜¯ä¸€å€‹ä¸€å€‹èªªæ˜ä»–å€‘å„è‡ªçš„åŠŸèƒ½ç‚ºä½•ã€‚</p>\n<ul>\n<li><code class=\"language-text\">appendInitialChild(parentInstance, child)</code></li>\n</ul>\n<p>ç•¶ renderer åœ¨ç¹ªè£½ component çš„æ™‚å€™ï¼Œæœƒé€éæ­¤å‡½å¼å°‡è©² component çš„ child component append ä¸Šå»ï¼Œæ‰€ä»¥åœ¨é€™å€‹å‡½å¼ä¸­ï¼Œä½ å¿…é ˆå¯¦ä½œå¦‚ä½•å°‡ä½ æƒ³è¦ render çš„ component child åŠ åˆ°å…¶ parent component ä¸Šé ­ã€‚ä»¥æˆ‘å€‘çš„ç¯„ä¾‹ç‚ºä¾‹ï¼Œæ˜¯æœƒåœ¨æ¯å€‹ component éƒ½å¯¦ä½œä¸€å€‹ <code class=\"language-text\">appendChild</code> å‡½å¼ï¼Œåœ¨é€™é‚Šæˆ‘å€‘å°±åªéœ€è¦åŸ·è¡Œ <code class=\"language-text\">parentInstance.appendChild(child);</code> å³å¯ã€‚</p>\n<ul>\n<li><code class=\"language-text\">createInstance(\ntype,\nprops,\nrootContainerInstance,\nhostContext,\ninternalInstanceHandle\n)</code></li>\n</ul>\n<p>çœ‹åå­—å°±çŸ¥é“æ˜¯åœ¨å‰µå»º Component instance çš„å‡½å¼ï¼Œæœƒå‚³å…¥ç•¶å‰ç¯€é»çš„ typeã€è©²ç¯€é»çš„ propsã€æ ¹ç¯€é»çš„å¯¦ä¾‹ã€host ç’°å¢ƒçš„ contextï¼Œä»¥åŠä¸€å€‹å«åš internalInstanceHandle çš„ç‰©ä»¶ã€‚</p>\n<p>å…¶ä»–åƒæ•¸éƒ½å¾ˆå¥½æ‡‚ï¼Œé€™å€‹ internalInstanceHandle å…¶å¯¦å°±æ˜¯å°æ‡‰æ­¤ç¯€é»çš„ fiberã€‚æˆ‘å€‘å‰é¢æœ‰èªªéï¼Œfiber ä»£è¡¨çš„æ˜¯æ•´å€‹ reconciler éç¨‹ä¸­çš„ä¸€å€‹å·¥ä½œå–®ä½ï¼Œè€Œæ¯å€‹ component éƒ½æœ‰å°æ‡‰çš„å…©ç¨® fiberï¼Œåˆ†åˆ¥æ˜¯å·²ç¶“å®Œæˆå·¥ä½œï¼Œå¯ä»¥render çš„ flushed fiber è·Ÿå°šæœªè™•ç†å®Œçš„ work in progress fiberï¼Œfiber ä¸­åŒ…å«è¨±å¤š component çš„è³‡è¨Šã€‚åŸºæœ¬ä¸Šé€™å€‹ç¯„ä¾‹ä¸­ï¼Œå‰é¢å…©å€‹åƒæ•¸å°±è¶³å¤ äº†ã€‚æƒ³äº†è§£æ›´å¤š fiber çš„å…§å®¹è«‹åƒè€ƒ <a href=\"https://github.com/acdlite/react-fiber-architecture\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">react-fiber-architecture</a>ã€‚</p>\n<p>åœ¨é€™å€‹ç¯„ä¾‹ä¸­ï¼Œæˆ‘å€‘åªéœ€è¦é€éå‚³å…¥çš„ type ä¾†æ±ºå®šæˆ‘å€‘è¦å°æ‡‰ç”¢ç”Ÿå“ªå€‹ component çš„å¯¦ä¾‹ï¼Œå¾Œé¢æœƒåœ¨èªªæ˜æ¯å€‹ component çš„å¯¦ä½œï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token constant\">COMPONENTS</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">ROOT</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PPTXDocument</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">TEXT</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Text</span><span class=\"token punctuation\">(</span>rootContainerInstance<span class=\"token punctuation\">,</span> props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">SLIDE</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Slide</span><span class=\"token punctuation\">(</span>rootContainerInstance<span class=\"token punctuation\">,</span> props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\t\n<span class=\"token keyword\">return</span> <span class=\"token constant\">COMPONENTS</span><span class=\"token punctuation\">[</span>type<span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token constant\">COMPONENTS</span><span class=\"token punctuation\">.</span>default<span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">getRootHostContext(instance)</code></li>\n</ul>\n<p>é€™å€‹å‡½å¼è®“ä½ èƒ½å¤ èˆ‡ Host Config ä¸­çš„å…¶ä»– method å…±äº« contextã€‚åŸºæœ¬ä¸Šæœƒå‚³å…¥ root component instance ç•¶åƒæ•¸ã€‚\nåœ¨é€™ç¯„ä¾‹ä¸­ï¼Œä¸¦æ²’æœ‰éœ€è¦ share ä»»ä½• contextï¼Œæ‰€ä»¥å›å‚³å€‹ç©ºç‰©ä»¶å³å¯ã€‚</p>\n<ul>\n<li><code class=\"language-text\">getChildHostContext(parentHostContext, type, rootContainerInstance)</code></li>\n</ul>\n<p>èˆ‡ä¸Šä¸€å€‹å‡½å¼é›·åŒï¼Œè®“ä½ èƒ½å¤ åˆ†äº« context çµ¦ç•¶ä¸‹ç¯€é»çš„ childrenï¼Œä¹Ÿèƒ½å–å¾— parent çš„ contextã€‚æˆ‘å€‘ä¸€æ¨£ä¸éœ€è¦ç”¨åˆ°ï¼Œæ‰€ä»¥å›å‚³ç©ºç‰©ä»¶ã€‚</p>\n<ul>\n<li><code class=\"language-text\">shouldSetTextContent(type, props)</code></li>\n</ul>\n<p>å°±æˆ‘çš„ç†è§£ï¼Œé€™å€‹å‡½æ•¸çš„ç›®çš„å¯ä»¥ç°¡å–®èªªæ˜¯è®“ä½ æœ‰æ©Ÿæœƒåˆ¤æ–·æ˜¯å¦è¦å°‡ traversal åœæ­¢åœ¨ç•¶å‰ç¯€é»ã€‚é€šå¸¸æˆ‘å€‘çš„ leaf node éƒ½æœƒæ˜¯ text nodeï¼Œè‹¥åœ¨æ­¤å‡½å¼å…§ä½ å›å‚³ trueï¼Œå‰‡ reconciler æœƒåœæ­¢ç¹¼çºŒå¾€ä¸‹ traverseï¼Œä»–æœƒåœæ­¢åœ¨é€™å±¤ï¼Œç„¶å¾Œæ¥è‘—å‘¼å« <code class=\"language-text\">createInstance</code> å»å‰µå»ºå¯¦ä¾‹ã€‚</p>\n<p>è‹¥æ˜¯è¨­ç‚º falseï¼Œreconciler æ¾¤æœƒç¹¼çºŒéè¿´ä¸‹å»ï¼Œç›´åˆ°æ­¤å‡½å¼å›å‚³ trueï¼Œæˆ–æ˜¯çœŸçš„é”åˆ°äº† leaf text nodeã€‚è‹¥æ˜¯é”åˆ° leaf text nodeï¼Œå°±æœƒå‘¼å«å¦å€‹å‡½å¼ - <code class=\"language-text\">createTextInstance</code>ã€‚</p>\n<p>ä»¥æˆ‘å€‘çš„ç¯„ä¾‹ä¾†èªªï¼Œæˆ‘å€‘ä¸åƒ <code class=\"language-text\">react-dom</code> éœ€è¦è€ƒæ…® <code class=\"language-text\">textarea</code> æˆ–æ˜¯ <code class=\"language-text\">dangerouslySetInnerHTML</code> ç­‰æƒ…æ³ï¼Œéƒ½ç›´æ¥å›å‚³ false å³å¯ã€‚</p>\n<ul>\n<li><code class=\"language-text\">createTextInstance(text, rootContainerInstance, hostContext, internalInstanceHandle)</code></li>\n</ul>\n<p>é¡§åæ€ç¾©å°±æ˜¯å‰µå»º Text instanceï¼Œé€™å€‹ Text æŒ‡çš„æ˜¯ä½ åœ¨ component ä¸­ç›´æ¥æ’°å¯«çš„ string éƒ¨åˆ†ï¼Œä¾‹å¦‚ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>Text<span class=\"token operator\">></span> Taiwan No<span class=\"token punctuation\">.</span><span class=\"token number\">1</span> <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Text<span class=\"token operator\">></span></code></pre></div>\n<p><code class=\"language-text\">Taiwan No.1</code> å°±æ˜¯é€™é‚Šè¦è™•ç†çš„ Text instanceã€‚åœ¨ <code class=\"language-text\">react-dom</code> ä¸­å°±æ˜¯è¦å‰µå»ºä¸€å€‹ <code class=\"language-text\">textNode</code>ï¼Œè€Œåœ¨é€™é‚Šæˆ‘å€‘ç›´æ¥å›å‚³ Text æœ¬èº«ï¼Œè®“ä»–çš„çˆ¶ç¯€é» <code class=\"language-text\">&lt;Text></code> ä¾†è™•ç†ã€‚\né™¤äº†ç¬¬ä¸€å€‹åƒæ•¸ text å¤–ï¼Œã„§æ¨£æœƒæœ‰ root component instanceã€host context è·Ÿ internalInstanceHandle(fiber)ï¼Œã„§æ¨£æˆ‘å€‘åªæœƒç”¨åˆ°ç¬¬ä¸€å€‹åƒæ•¸ textã€‚</p>\n<ul>\n<li><code class=\"language-text\">finalizeInitialChildren(\nparentInstance,\ntype,\nprops,\nrootContainerInstance,\nhostContext\n)</code></li>\n</ul>\n<p>é€™å€‹å‡½å¼ä¸»è¦ç›®çš„åœ¨æ–¼å‘Šè¨´ reconciler éœ€ä¸éœ€è¦åœ¨ç•¶å‰çš„ component ä¸Šå‘¼å« <code class=\"language-text\">commitMount()</code>ï¼Œä¹Ÿå°±æ˜¯éœ€ä¸éœ€è¦ç­‰åˆ°æ‰€æœ‰ element éƒ½è¢« rendered ä»¥å¾Œæ‰åŸ·è¡ŒæŸäº›äº‹æƒ…ã€‚ä¾‹å¦‚ input elements çš„ autofocusï¼Œå°±éœ€è¦ç­‰ component mount ä»¥å¾Œæ‰èƒ½è¢«å‘¼å«ã€‚\nåœ¨æˆ‘å€‘çš„ç¯„ä¾‹ä¸­ï¼Œä¸éœ€è¦åšé€™äº›äº‹ï¼Œæ‰€ä»¥å°±å›å‚³ false å³å¯ã€‚è‹¥æ˜¯ä½ å›å‚³ trueï¼Œé‚£å°±å¿…é ˆä¹Ÿå¯¦ä½œ <code class=\"language-text\">commitMount</code>ã€‚</p>\n<ul>\n<li><code class=\"language-text\">getPublicInstance(ins)</code></li>\n</ul>\n<p>åªæ˜¯å€‹å…¬é–‹ä»‹é¢è®“ä½ èƒ½å–å¾— instanceã€‚</p>\n<ul>\n<li><code class=\"language-text\">prepareForCommit(rootcontainerInfo)</code></li>\n</ul>\n<p>ç•¶ä½ çš„ç¯€é»å¯¦ä¾‹éƒ½ç”Ÿæˆå¾Œï¼Œå³å°‡æ›è¼‰åˆ°æ ¹ç¯€é»æ™‚ï¼Œå¯ä»¥åœ¨é€™å€‹å‡½å¼å…§é€²è¡Œä¸€äº›æº–å‚™å·¥ä½œï¼Œä¾‹å¦‚çµ±è¨ˆéœ€è¦ autofucs çš„ç¯€é»ç­‰ç­‰ï¼Œä»¥æˆ‘å€‘çš„ç¯„ä¾‹ä¾†èªªä¸éœ€è¦åšä»»ä½•äº‹ï¼Œç•™ç©ºã€‚</p>\n<ul>\n<li><code class=\"language-text\">resetAfterCommit(rootcontainerInfo)</code></li>\n</ul>\n<p>ç•¶ reconciliation çµæŸï¼Œinmemory tree éƒ½æ›è¼‰åˆ° host root element æ™‚ï¼Œæˆ‘å€‘å¯ä»¥åˆ©ç”¨é€™å€‹å‡½å¼åŸ·è¡Œä»»ä½•å¾ŒçºŒå‹•ä½œï¼Œåƒæ˜¯å›è¦†ä¸€äº› event ç‹€æ…‹ç­‰ç­‰ã€‚</p>\n<ul>\n<li><code class=\"language-text\">appendChildToContainer(container, child)</code></li>\n<li><code class=\"language-text\">removeChildFromContainer(container, child)</code></li>\n<li><code class=\"language-text\">supportsMutation</code></li>\n</ul>\n<p>é€™å¹¾å€‹å¯ä»¥ä¸€èµ·çœ‹ï¼Œ<code class=\"language-text\">supportsMutation</code> ä»£è¡¨çš„æ˜¯ä½ çš„ host environment æ”¯ä¸æ”¯æ´ä¸€äº›å¯ä»¥æ›´æ”¹çµæ§‹çš„ APIï¼Œåƒæ˜¯ DOM å…§çš„ <code class=\"language-text\">appendChild</code>ï¼Œè‹¥æœ‰å‰‡å›å‚³ trueï¼Œä¸¦å¯¦ä½œ <code class=\"language-text\">appendChildToContainer</code> èˆ‡ <code class=\"language-text\">removeChildFromContainer</code>ï¼Œè®“ renderer çŸ¥é“ç•¶ host element åŸ·è¡Œ mutative api æ™‚è©²å¦‚ä½•è™•ç†ã€‚\nåœ¨æˆ‘å€‘çš„ç¯„ä¾‹ä¸­æˆ‘å€‘ä¸éœ€è¦ç”¨åˆ°é€™äº›ï¼Œä½†å› ç‚ºé€™æ‡‰è©²æ˜¯è »å®¹æ˜“ç”¨åˆ°çš„ï¼Œæ‰€ä»¥æˆ‘è¨­ç‚º true ä¸¦åœ¨é€™é‚Šèªªæ˜ä¸€ä¸‹ã€‚</p>\n<ul>\n<li><code class=\"language-text\">now()</code></li>\n</ul>\n<p>host config å…§æœ€å¾Œä¸€å€‹å‡½å¼ <code class=\"language-text\">now()</code>ï¼Œæ˜¯ reconciler ç”¨ä¾†è¨ˆç®—ç•¶å‰æ™‚é–“çš„ï¼Œæˆ‘å€‘å¯ä»¥ç•™ç©ºï¼Œæˆ–æ˜¯æä¾› <code class=\"language-text\">Date.now</code>ã€‚</p>\n<h2 id=\"å°æ‡‰-custom-renderer-çš„-component\" style=\"position:relative;\"><a href=\"#%E5%B0%8D%E6%87%89-custom-renderer-%E7%9A%84-component\" aria-label=\"å°æ‡‰ custom renderer çš„ component permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>å°æ‡‰ Custom Renderer çš„ component</h2>\n<p>çµ‚æ–¼èµ°å®Œä¸€é host configï¼Œæ¥ä¸‹ä¾†å¯ä»¥çœ‹çœ‹æˆ‘å€‘çš„ component è©²æ€éº¼å¯¦ä½œã€‚</p>\n<p>åœ¨æˆ‘å€‘çš„ <code class=\"language-text\">createInstance()</code> ä¸­ï¼Œæˆ‘å€‘æ ¹æ“šå‚³å…¥çš„ fiber type ä¾†æ±ºå®šè¦å¯¦ä¾‹åŒ–å“ªå€‹ componentï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">createInstance</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">type<span class=\"token punctuation\">,</span> props<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>args</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token constant\">COMPONENTS</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">ROOT</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PPTXDocument</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">TEXT</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Text</span><span class=\"token punctuation\">(</span>rootContainerInstance<span class=\"token punctuation\">,</span> props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">SLIDE</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Slide</span><span class=\"token punctuation\">(</span>rootContainerInstance<span class=\"token punctuation\">,</span> props<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token keyword\">default</span><span class=\"token operator\">:</span> <span class=\"token keyword\">undefined</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token constant\">COMPONENTS</span><span class=\"token punctuation\">[</span>type<span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token constant\">COMPONENTS</span><span class=\"token punctuation\">.</span>default<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<h4 id=\"root-component---pptxdocument\" style=\"position:relative;\"><a href=\"#root-component---pptxdocument\" aria-label=\"root component   pptxdocument permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Root Component - PPTXDocument</h4>\n<p>Root component åœ¨ <code class=\"language-text\">react-dom</code> å…§å¯ä»¥èªªæ˜¯ <code class=\"language-text\">document</code> ç‰©ä»¶ï¼Œè€Œåœ¨æˆ‘å€‘çš„ PPTXRenderer ä¸­ï¼Œè©²è§’è‰²å°±æ˜¯ <code class=\"language-text\">new officegen('pptx')</code> ç‰©ä»¶ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">PPTXDocument</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>pptx <span class=\"token operator\">=</span> <span class=\"token function\">officegen</span><span class=\"token punctuation\">(</span><span class=\"token string\">'pptx'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>è€Œæ­¤ç‰©ä»¶æœƒè¢«ç•¶æˆ <code class=\"language-text\">rootContainerInstance</code> è¢«å‚³åˆ°å…¶ä»– host config çš„å‡½å¼ä¸­ã€‚</p>\n<h4 id=\"slide-component\" style=\"position:relative;\"><a href=\"#slide-component\" aria-label=\"slide component permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Slide Component</h4>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Slide</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">root<span class=\"token punctuation\">,</span> props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>root <span class=\"token operator\">=</span> root<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props <span class=\"token operator\">=</span> props<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>slideInstance <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>root<span class=\"token punctuation\">.</span>pptx<span class=\"token punctuation\">.</span><span class=\"token function\">makeNewSlide</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">child</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// ä¾æ“šä¸åŒ Host environment ä¾†æ±ºå®šè¦å¦‚ä½•å¯¦ä½œ</span>\n    <span class=\"token comment\">// åœ¨ react-dom ä¸­ï¼Œå¯èƒ½å°±æ˜¯ document.appendChild(child)</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>type <span class=\"token operator\">===</span> <span class=\"token string\">'TEXT'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// render the text node</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>slideInstance<span class=\"token punctuation\">.</span><span class=\"token function\">addText</span><span class=\"token punctuation\">(</span>child<span class=\"token punctuation\">.</span>content<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Slide component æœƒå–å¾— root instanceï¼Œä¸¦å‘¼å« <code class=\"language-text\">makeNewSlide()</code> ä¾†å‰µå»º slideï¼ˆé€™æ˜¯å±¬æ–¼ <code class=\"language-text\">officegen</code> çš„ APIï¼‰ã€‚</p>\n<p>ç„¶å¾Œæˆ‘å€‘éœ€è¦å¯¦ä½œ <code class=\"language-text\">appendChild(child)</code>ï¼Œå› ç‚ºæˆ‘å€‘å¸Œæœ›èƒ½é€éä»¥ä¸‹çš„æ–¹å¼ä¾†å‰µå»º slidesï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token operator\">&lt;</span>Slide<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span>Text<span class=\"token operator\">></span>Slide <span class=\"token number\">1</span> ğŸ˜<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Text<span class=\"token operator\">></span>\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Slide<span class=\"token operator\">></span></code></pre></div>\n<p>èƒ½æ¥æ”¶ä¸€å€‹ <code class=\"language-text\">&lt;Text></code> component ç•¶å­ç¯€é»ä¾† render Text åˆ° slide ä¸Šï¼Œæˆ‘å€‘ç”¨ <code class=\"language-text\">officegen</code> æä¾›çš„ <code class=\"language-text\">addText</code> ä¾†å°‡ <code class=\"language-text\">child.content</code> ç¹ªè£½ä¸Šå»ã€‚æ­¤å‡½å¼æœƒè¢« <code class=\"language-text\">appendInitialChild</code> å‘¼å«ã€‚</p>\n<h4 id=\"text-component\" style=\"position:relative;\"><a href=\"#text-component\" aria-label=\"text component permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Text Component</h4>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Text</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">root<span class=\"token punctuation\">,</span> props</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>type <span class=\"token operator\">=</span> <span class=\"token string\">'TEXT'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>content <span class=\"token operator\">=</span> <span class=\"token string\">''</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">child</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">typeof</span> child <span class=\"token operator\">===</span> <span class=\"token string\">'string'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>content <span class=\"token operator\">=</span> child<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>åŸºæœ¬çµæ§‹ä¸€æ¨£ï¼Œåªæ˜¯åœ¨ <code class=\"language-text\">appendChild</code> ä¸­ï¼Œæˆ‘å€‘ä¸ç”¨ append ä»»ä½• childï¼Œåä¹‹ï¼Œæˆ‘å€‘éœ€è¦å°‡ text component æ”¶åˆ°çš„ text child å­˜å…¥ä¸€å€‹ content è®Šæ•¸ï¼Œè®“å…¶ parent(slide component) å¯ä»¥æ¥æ”¶åˆ°ã€‚</p>\n<h4 id=\"æ³¨æ„äº‹é …\" style=\"position:relative;\"><a href=\"#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A0%85\" aria-label=\"æ³¨æ„äº‹é … permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>æ³¨æ„äº‹é …</h4>\n<p>é›–ç„¶æˆ‘å€‘åœ¨é€™é‚Šéƒ½å‰µå»ºäº† <code class=\"language-text\">Slide</code> èˆ‡ <code class=\"language-text\">Text</code> componentï¼Œä½†æ˜¯åœ¨çœŸæ­£ä½¿ç”¨åœ¨ jsx è£¡é¢æ™‚ï¼ˆä¹Ÿå°±æ˜¯ <code class=\"language-text\">App.js</code>ï¼‰æ˜¯ä¸èƒ½ç›´æ¥ import é€™é‚Šçš„ component ä¾†ä½¿ç”¨çš„ï¼Œæˆ‘å€‘å¯ä»¥å¦å¤–å‰µå»ºä¸€å€‹ string alias çµ¦ <code class=\"language-text\">App.js</code> ä½¿ç”¨ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Aliases for createInstance</span>\n<span class=\"token keyword\">const</span> Text <span class=\"token operator\">=</span> <span class=\"token string\">'TEXT'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> Slide <span class=\"token operator\">=</span> <span class=\"token string\">'SLIDE'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n  <span class=\"token operator\">&lt;</span>Slide<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span>Text<span class=\"token operator\">></span>Slide <span class=\"token number\">1</span> ğŸ˜ ğŸ˜<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Text<span class=\"token operator\">></span>\n  <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Slide<span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>æˆ‘å€‘ä¸Šè¿°æ‰€æ’°å¯«çš„ Component æœƒåœ¨ reconciler çš„ <code class=\"language-text\">createInstance</code> ä¸­ä¾æ“šé€™é‚Šçš„ alias ä¾†å‰µå»ºå¯¦ä¾‹ã€‚</p>\n<h4 id=\"render-function\" style=\"position:relative;\"><a href=\"#render-function\" aria-label=\"render function permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Render function</h4>\n<p>æœ€å¾Œæˆ‘å€‘è¦å¯¦ä½œ render function ä¾†çœŸæ­£å–ä»£ä¸€èˆ¬çš„ <code class=\"language-text\">ReactDOM.render</code>ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// render component</span>\n<span class=\"token keyword\">async</span> <span class=\"token keyword\">function</span> <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">component<span class=\"token punctuation\">,</span> filePath</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// å‰µå»º Root component instance ç•¶æ•´å€‹ react tree çš„ rootã€‚ </span>\n  <span class=\"token keyword\">const</span> container <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">PPTXDocument</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// å‘¼å« create containerï¼Œè©²å‡½å¼æœƒå›å‚³ä¸€å€‹ flushed fiberï¼ˆå®Œæˆå·¥ä½œçš„ fiberï¼Œä»£è¡¨å¯ä»¥ renderï¼‰</span>\n  <span class=\"token keyword\">const</span> node <span class=\"token operator\">=</span> PPTXRenderer<span class=\"token punctuation\">.</span><span class=\"token function\">createContainer</span><span class=\"token punctuation\">(</span>container<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// æ¥è‘—é€éå‘¼å« updateContainer ä¾†è¨­å®šä¸€å€‹å¾æ ¹ç¯€é»é–‹å§‹çš„ updateï¼Œæ›´æ–°æ•´å€‹æ¨¹ã€‚</span>\n  PPTXRenderer<span class=\"token punctuation\">.</span><span class=\"token function\">updateContainer</span><span class=\"token punctuation\">(</span>component<span class=\"token punctuation\">,</span> node<span class=\"token punctuation\">,</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token comment\">// Officegen generates a output stream and not a file</span>\n  <span class=\"token keyword\">const</span> stream <span class=\"token operator\">=</span> fs<span class=\"token punctuation\">.</span><span class=\"token function\">createWriteStream</span><span class=\"token punctuation\">(</span>filePath<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">await</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Promise</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">resolve<span class=\"token punctuation\">,</span> reject</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Generate a pptx document</span>\n    container<span class=\"token punctuation\">.</span>pptx<span class=\"token punctuation\">.</span><span class=\"token function\">generate</span><span class=\"token punctuation\">(</span>stream<span class=\"token punctuation\">,</span> <span class=\"token function\">Events</span><span class=\"token punctuation\">(</span>filePath<span class=\"token punctuation\">,</span> resolve<span class=\"token punctuation\">,</span> reject<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>è¨˜å¾—æˆ‘å€‘ä¸€èˆ¬åœ¨å‘¼å« <code class=\"language-text\">ReactDOM.render</code> æ™‚ï¼Œéƒ½æœƒå‚³å…¥å…©å€‹åƒæ•¸å—ï¼Ÿä¸€å€‹æ˜¯æˆ‘å€‘çš„ root componentï¼Œä¸€å€‹å°±æ˜¯è¦æ›è¼‰çš„ dom elementï¼Œè€Œåœ¨æˆ‘å€‘çš„ç¯„ä¾‹ä¸­ï¼Œæˆ‘å€‘ä¸€æ¨£å‚³å…¥ root componentï¼Œä½†ç¬¬äºŒåƒæ•¸çµ¦äºˆçš„æ˜¯è¦ç”¢ç”Ÿçš„ ppt çš„è·¯å¾‘ï¼Œè€Œéè¦æ›è¼‰çš„ elementï¼Œå› ç‚ºæˆ‘å€‘æ˜¯è¦å°‡ react component å¯«å…¥ pptx æª”æ¡ˆã€‚</p>\n<p>æœ€å¾Œåœ¨å›å‚³çš„ Promise function ä¸­ï¼Œæˆ‘å€‘å‘¼å« <code class=\"language-text\">officegen</code> çš„ <code class=\"language-text\">generate</code> å‡½å¼ä¾†å°‡æˆ‘å€‘åœ¨å‰é¢ host config çš„ lifecycle method ä¸­æ‰€é™„åŠ åˆ°æ ¹ç¯€é»çš„å…§å®¹ï¼ˆappendChild çš„éƒ¨åˆ†ï¼‰å¯«å…¥æª”æ¡ˆã€‚</p>\n<p>é€™æ¨£å°±å®Œæˆäº†æˆ‘å€‘çš„ Custom Rendererï¼</p>\n<p>å®Œæ•´ç¨‹å¼ç¢¼åœ¨æ­¤ -> <a href=\"https://github.com/ArvinH/reapptx\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">reapptx</a></p>\n<h2 id=\"è£œå……èªªæ˜---update\" style=\"position:relative;\"><a href=\"#%E8%A3%9C%E5%85%85%E8%AA%AA%E6%98%8E---update\" aria-label=\"è£œå……èªªæ˜   update permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>è£œå……èªªæ˜ - update</h2>\n<p>é€™æ¬¡çš„ç¯„ä¾‹è£¡é¢ä¸¦æ²’æœ‰éœ€è¦æ›´æ–° Component ç‹€æ…‹ï¼Œå¦‚æœä½ éœ€è¦å¯¦ä½œä¸€å€‹èƒ½è™•ç† state update çš„ custom rendererï¼Œåœ¨ä½ çš„ host config ä¸­ï¼Œé™¤äº† <code class=\"language-text\">appendChildToContainer()</code> å’Œ <code class=\"language-text\">removeChildFromContainer()</code> å¤–ï¼Œé‚„éœ€è¦å¯¦ä½œ <code class=\"language-text\">prepareUpdate()</code> èˆ‡ <code class=\"language-text\">commitUpdate()</code>ã€‚</p>\n<ul>\n<li><code class=\"language-text\">prepareUpdate(instance, type, oldProps, newProps, rootContainerInstance, hostContext)</code></li>\n</ul>\n<p>å¾ä»–å‚³å…¥çš„åƒæ•¸å°±å¯ä»¥çœ‹å‡ºï¼Œä½ å¯ä»¥è—‰ç”± <code class=\"language-text\">oldProps</code> èˆ‡ <code class=\"language-text\">newProps</code> çš„æ¯”è¼ƒä¾†æ±ºå®šæ˜¯å¦è¦é€²è¡Œæ›´æ–°ï¼Œè‹¥ä¸éœ€è¦å°±å›å‚³ nullï¼Œè¦çš„è©±å°±å›å‚³è¦æ›´æ–°çš„ payloadã€‚</p>\n<ul>\n<li><code class=\"language-text\">commitUpdate(instance, updatePayload, type, oldProps, newProps, internalInstanceHandle)</code></li>\n</ul>\n<p>é€™å€‹å‡½å¼å°±æ˜¯è² è²¬æœ€å¾Œå°‡è¦ <code class=\"language-text\">prepareUpdate</code> å›å‚³çš„ update payload å¥—ç”¨åˆ°å¯¦éš› instance ä¸Šã€‚</p>\n<p>é—œæ–¼<strong>æ›´æ–°</strong>çš„å¯¦éš›ä¾‹å­ï¼Œå¯ä»¥åƒè€ƒ <a href=\"https://juejin.im/post/5c31b814f265da612b13bf23#heading-3\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">react æ¸²æŸ“å™¨äº†è§£ä¸€ä¸‹</a> é€™ç¯‡æ–‡ç« ï¼Œæœ‰å¯¦éš›çš„ä¾‹å­èˆ‡è©³ç´°ç¨‹å¼ç¢¼è¬›è§£ã€‚</p>\n<h2 id=\"çµè«–\" style=\"position:relative;\"><a href=\"#%E7%B5%90%E8%AB%96\" aria-label=\"çµè«– permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>çµè«–</h2>\n<p>ä¸€ä¸å°å¿ƒæ´‹æ´‹ç‘ç‘ç´€éŒ„äº†ä¸€å †ï¼Œä½†é€éè£½ä½œ custom react rendererï¼Œä¸€æ­¥æ­¥æŠŠæ•´å€‹æµç¨‹èˆ‡å…¶ä¸­ç”¨åˆ°çš„å‡½å¼éƒ½é‡æ¸…ç”¨é€”å¾Œï¼Œå°æ–¼ react åœ¨é€²è¡Œ reconciliation èˆ‡ rendering çš„æµç¨‹å¤šäº†ä¸å°‘äº†è§£ï¼Œä¹Ÿä¸å†å° React ç‚ºä»€éº¼èƒ½å¥—ç”¨åœ¨é€™éº¼å¤šä¸åŒçš„ç’°å¢ƒä¸­æ„Ÿåˆ°ç¥ç§˜äº†ï¼Œç®—æ˜¯å¾ˆä¸éŒ¯çš„æ”¶ç©«ï¼æœ‰è€å¿ƒçœ‹å®Œçš„è®€è€…è‹¥ç™¼ç¾éŒ¯èª¤æˆ–æ˜¯ä¸æ¸…æ¥šçš„åœ°æ–¹ï¼Œæ­¡è¿ç•™è¨€å‘ŠçŸ¥æŒ‡æ•™ã€‚</p>\n<h2 id=\"è³‡æ–™ä¾†æº\" style=\"position:relative;\"><a href=\"#%E8%B3%87%E6%96%99%E4%BE%86%E6%BA%90\" aria-label=\"è³‡æ–™ä¾†æº permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>è³‡æ–™ä¾†æº</h2>\n<ol>\n<li><a href=\"https://www.youtube.com/watch?v=CGpMlWVcHok\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Building a Custom React Renderer</a></li>\n<li><a href=\"https://github.com/nitin42/Making-a-custom-React-renderer\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Making-a-custom-React-renderer</a></li>\n<li><a href=\"https://blog.atulr.com/react-custom-renderer-1/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">âš›ï¸ğŸ‘†Beginners guide to React Renderers. How to build your own renderer from scratch?</a></li>\n<li><a href=\"https://juejin.im/post/5c31b814f265da612b13bf23#heading-3\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">react æ¸²æŸ“å™¨äº†è§£ä¸€ä¸‹?</a></li>\n<li><a href=\"https://github.com/facebook/react/tree/60016c448bb7d19fc989acd05dda5aca2e124381/packages/react-reconciler\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">facebook/react-reconciler</a></li>\n<li><a href=\"https://github.com/chentsulin/awesome-react-renderer\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">awesome-react-renderer</a></li>\n</ol>","fields":{"slug":"custom-react-renderer-pttx"},"frontmatter":{"title":"è£½ä½œ Custom React renderer - ç”¨ React å¯« ppt","date":"02-26-2020","tags":["web","react","renderer"]},"timeToRead":16}},"pageContext":{"slug":"custom-react-renderer-pttx","prev":{"excerpt":"å¥½æ­Œåˆ†äº«ï¼šOrganic melody feat.Takuya Maeda","html":"<blockquote>\n<p>å¥½æ­Œåˆ†äº«ï¼š<a href=\"https://youtu.be/wTebM8bWxJk\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Organic melody feat.Takuya Maeda</a></p>\n</blockquote>\n<iframe width=\"100%\" height=\"315\" src=\"https://www.youtube.com/embed/wTebM8bWxJk\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n<!-- more -->\n<h1 id=\"å‰è¨€\" style=\"position:relative;\"><a href=\"#%E5%89%8D%E8%A8%80\" aria-label=\"å‰è¨€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>å‰è¨€</h1>\n<p>å¤§ç´„åœ¨å…©å¹´å‰æˆ‘æ›¾ç¶“å¯«éä¸€ç¯‡æ–‡ç« ä»‹ç´¹å¦‚ä½•ç”¨ CSS ç¹ªåœ– - <a href=\"https://blog.techbridge.cc/2017/11/17/drawing-css-image/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ç”¨ CSS ç•«ç•«çš„å°æŠ€å·§</a>ï¼Œè©²æ–‡ç« çš„æœ€å¾Œæˆ‘æœ‰ç¨å¾®æåˆ°æˆ‘å€‘èƒ½å¤ åˆ©ç”¨ CSS3 çš„ <code class=\"language-text\">box-shadow</code> å±¬æ€§ä¾†è£½é€ å‡º Pixel é¢¨æ ¼çš„åœ–æ¡ˆã€‚ç„¶è€Œï¼Œæ‰€æœ‰åœ–æ¡ˆä¸éƒ½æ˜¯ç”± pixel çµ„æˆçš„å—ï¼Ÿå¦‚æœæˆ‘å€‘èƒ½å¤ ç”¨ box-shadow ç•«å‡º Pixel Artï¼Œé‚£åªè¦ Pixel æ•¸é‡è¶³å¤ ï¼Œsize å¤ ç´°ç·»ï¼Œæ‡‰è©²æ˜¯èƒ½å¤ ç¹ªè£½å‡ºä»»ä½•åœ–å½¢çš„å§ï¼Ÿ</p>\n<p>ä¸éåœ¨<a href=\"https://blog.techbridge.cc/2017/11/17/drawing-css-image/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ç”¨ CSS ç•«ç•«çš„å°æŠ€å·§</a>é€™ç¯‡æ–‡ç« ä¸­ï¼Œæ‰€è£½ä½œçš„æ˜¯æ¯”è¼ƒç°¡å–®çš„æ–‡å­—ï¼Œé€éç›´æ¥ç·¨è¼¯ <code class=\"language-text\">box-shadow</code> é‚„åœ¨å¯æ¥å—ç¯„åœä¸­ï¼Œä½†å¦‚æœæ˜¯æƒ³è¦ç¹ªè£½è¤‡é›œä¸€é»çš„äººç‰©è§’è‰²ï¼Œä¾‹å¦‚é‹¼éµäºº<a href=\"https://codepen.io/nucliweb/pen/oXMYyL?editors=1100\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">src</a>ï¼š</p>\n<p><img src=\"https://static.coderbridge.com/img/ArvinH/40adf0260c1844fb9868f7c524424976.png\" alt=\"iron-man\"> </p>\n<p>é€™å¦‚æœä¸€æ ¼ä¸€æ ¼æ‰‹å‹•å°ç…§ï¼Œç„¶å¾Œæ’°å¯« <code class=\"language-text\">box-shadow</code>ï¼Œæ¯”ç™»å¤©é‚„é›£ï¼Œæ›´åˆ¥ææƒ³ç¹ªè£½å‡ºæ¯” Pixel Art ç´°ç·»ä¸€é»çš„åœ–æ¡ˆäº†ã€‚</p>\n<p>ç¶²è·¯ä¸Šå°æ–¼ <code class=\"language-text\">box-shadow</code> çš„é‹ç”¨ï¼Œå¤§å¤šåœç¹åœ¨ Pixel Art çš„å¯¦ä½œï¼Œä¾‹å¦‚ <a href=\"https://una.im/sass-pixel-art/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Una Kravets çš„éƒ¨è½æ ¼</a> ä»‹ç´¹äº†å¦‚ä½•ä½¿ç”¨ SCSS èˆ‡é™£åˆ—ä¾†ç”¢ç”Ÿ CSS Pixel Artï¼›ä¸Šé¢é‹¼éµäººåŸåœ–<a href=\"https://codepen.io/nucliweb/pen/oXMYyL?editors=1100\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ä¹Ÿæ˜¯åˆ©ç”¨ç›¸åŒåŸç†</a>ï¼›<a href=\"http://elrumordelaluz.github.io/Pixelator/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Pixelator</a> å‰‡æ˜¯è®“ä½ èƒ½ç·šä¸Šç¹ªè£½è‡ªå·±å–œæ­¡çš„ Pixel Artï¼Œä¸¦ä¸”ç”¢ç”Ÿå‡ºå°æ‡‰çš„ <code class=\"language-text\">box-shadow</code>ï¼›</p>\n<p>å¥½åœ¨ Codepen ä¸Šé«˜æ‰‹å¦‚é›²ï¼Œè¢«æˆ‘ç™¼ç¾<a href=\"https://codepen.io/andrewarchi/pen/jPbqMx?editors=0010\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ä¸€ç¯‡</a>åˆ©ç”¨ Angular å¯¦ä½œåœ–ç‰‡è½‰ <code class=\"language-text\">box-shadow</code> çš„ç‰ˆæœ¬ï¼Œå¯¦ä½œæ–¹å¼å¾ˆæœ‰æ„æ€ï¼Œæˆ‘ç”¨ <a href=\"https://svelte.dev/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">svelte</a> æ”¹å¯«äº†ä¸€å€‹ç‰ˆæœ¬ï¼Œä»Šå¤©å°±ä¾†åˆ†äº«ä¸€ä¸‹å¯¦ä½œç´°ç¯€ï¼</p>\n<p>å…ˆçœ‹å€‹æˆæœï¼š</p>\n<p>Gif Demo:\n<img src=\"https://static.coderbridge.com/img/ArvinH/1697c384e21246a491d1bdc34fc3c61a.gif\" alt=\"gif-demo\"></p>\n<p>Live Demo:</p>\n<iframe src=\"https://codesandbox.io/embed/image-to-pixel-art-usdtn?fontsize=14&hidenavigation=1&theme=dark\" style=\"width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;\" title=\"image-to-pixel-art\" allow=\"geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media; usb\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"></iframe>\n<p>å¯ä»¥ä¸‹è¼‰é€™å€‹ç¯„ä¾‹åœ–ä¾†ä¸Šå‚³ï¼Œæ•ˆæœæœƒæ¯”è¼ƒå¥½ï¼š<img src=\"https://static.coderbridge.com/img/ArvinH/d4b4dbd77b93482781f7a5d27761630f.png\" alt=\"demo-mario\"></p>\n<h1 id=\"box-shadow\" style=\"position:relative;\"><a href=\"#box-shadow\" aria-label=\"box shadow permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Box-Shadow</h1>\n<p>åœ¨é–‹å§‹å‰ï¼Œå…ˆè¤‡ç¿’ä¸€ä¸‹ <code class=\"language-text\">box-shadow</code>ï¼ŒCSS3 çš„ <code class=\"language-text\">box-shadow</code> å±¬æ€§å¯ä»¥è¨­å®šå¤šå€‹å€¼ï¼Œæ¯å€‹å€¼ä»£è¡¨è‘—ä¸€å€‹ <code class=\"language-text\">box-shadow</code> çš„ x ä½ç§»(x-offset)ï¼Œy ä½ç§»(y-offset)ï¼Œé™°å½±æ¨¡ç³ŠåŠå¾‘(shadow blur radii)ï¼Œé™°å½±æ“´æ•£åŠå¾‘(shadow spread radii) å’Œé¡è‰²(color)ã€‚</p>\n<p>ç”±æ–¼ <strong>å…è¨±è¨­ç½®å¤šå€‹å€¼</strong> å’Œ <strong>å¯æ§åˆ¶ X èˆ‡ Y ä½ç§»</strong> é€™å…©å€‹ç‰¹è³ªï¼Œ<code class=\"language-text\">box-shadow</code> éå¸¸é©åˆç”¨ä¾†çµ„åˆæˆåœ–ç‰‡ï¼Œå°¤å…¶æ˜¯ Pixel Artã€‚ä»¥é»‘ç™½ç›¸é–“çš„æ£‹ç›¤ç‚ºä¾‹ï¼š</p>\n<div id=\"chess\" style=\"margin-bottom: 60px; width: 40px; height: 40px; box-shadow: 0 40px #000, 40px 0 #000; border: 1px solid #000;\"></div>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>\n    width: 40px;\n    height: 40px;\n    box-shadow: 0 40px #000, 40px 0 #000;\n    border: 1px solid #000;\n<span class=\"token punctuation\">\"</span></span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p><img src=\"https://static.coderbridge.com/img/ArvinH/789b88b181d44da997f09a02c23e0bf1.png\" alt=\"box-shadow-explain\"></p>\n<p>ä¾ç…§é€™å€‹åŸç†ï¼Œå°±èƒ½çµ„åˆæˆè¤‡é›œä¸€é»çš„ Pixel Artï¼š</p>\n<div id=\"result\" style=\"margin-bottom: 120px; width: 10px; height: 10px; box-shadow: rgb(243, 156, 18) 20px 30px 0px, rgb(243, 156, 18) 30px 30px 0px, rgb(243, 156, 18) 80px 30px 0px, rgb(243, 156, 18) 90px 30px 0px, rgb(243, 156, 18) 10px 40px 0px, rgb(231, 76, 60) 20px 40px 0px, rgb(231, 76, 60) 30px 40px 0px, rgb(243, 156, 18) 40px 40px 0px, rgb(243, 156, 18) 70px 40px 0px, rgb(243, 156, 18) 100px 40px 0px, rgb(243, 156, 18) 10px 50px 0px, rgb(231, 76, 60) 20px 50px 0px, rgb(243, 156, 18) 50px 50px 0px, rgb(243, 156, 18) 60px 50px 0px, rgb(243, 156, 18) 100px 50px 0px, rgb(243, 156, 18) 10px 60px 0px, rgb(231, 76, 60) 20px 60px 0px, rgb(231, 76, 60) 30px 60px 0px, rgb(243, 156, 18) 100px 60px 0px, rgb(243, 156, 18) 20px 70px 0px, rgb(231, 76, 60) 30px 70px 0px, rgb(231, 76, 60) 40px 70px 0px, rgb(243, 156, 18) 90px 70px 0px, rgb(243, 156, 18) 30px 80px 0px, rgb(231, 76, 60) 40px 80px 0px, rgb(231, 76, 60) 50px 80px 0px, rgb(243, 156, 18) 80px 80px 0px, rgb(243, 156, 18) 40px 90px 0px, rgb(231, 76, 60) 50px 90px 0px, rgb(243, 156, 18) 70px 90px 0px, rgb(243, 156, 18) 50px 100px 0px, rgb(243, 156, 18) 60px 100px 0px;\"></div>\n<p>ä½†èªªå¯¦è©±ï¼Œè¦æ‰‹å‹•æ’°å¯« <code class=\"language-text\">box-shadow</code> ä¾†çµ„åˆå‡ºé€™å€‹å°æ„›å¿ƒï¼Œå¤§æ¦‚å°±å»æ‰åŠæ¢å‘½äº†ï¼Œé‚„æ˜¯å¾—ä¾é  <a href=\"http://elrumordelaluz.github.io/Pixelator/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Pixelator</a> ä¾†ç¹ªè£½ä¸¦ç”¢ç”Ÿ CSSã€‚</p>\n<h1 id=\"åœ–ç‰‡è½‰-box-shadow-å¯¦ä½œåŸç†\" style=\"position:relative;\"><a href=\"#%E5%9C%96%E7%89%87%E8%BD%89-box-shadow-%E5%AF%A6%E4%BD%9C%E5%8E%9F%E7%90%86\" aria-label=\"åœ–ç‰‡è½‰ box shadow å¯¦ä½œåŸç† permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>åœ–ç‰‡è½‰ box-shadow å¯¦ä½œåŸç†</h1>\n<p>åœ¨è¤‡ç¿’å®Œ <code class=\"language-text\">box-shadow</code> çµ„æˆåœ–ç‰‡çš„åŸç†å¾Œï¼Œæ‡‰è©²ä¸é›£æ¨æ–·å‡ºåœ–ç‰‡è½‰ <code class=\"language-text\">box-shadow</code> çš„åšæ³•ã€‚</p>\n<p>æ¦‚å¿µä¸Šå°±æ˜¯å…ˆå®šç¾©å‡ºä¸€å€‹ grid systemï¼Œå°‡åœ–ç‰‡åˆ‡å‰²æˆä¸€å¡Šä¸€å¡Šçš„å–®ä½ï¼Œæ¥è‘—è¨ˆç®—å‡ºæ¯å€‹å–®ä½å€å¡Šçš„ x-offset èˆ‡ y-offsetï¼Œç„¶å¾Œæ”¾å…¥å°æ‡‰é¡é¡è‰²ï¼Œé€™æ¨£å°±èƒ½çµ„åˆå‡ºä¸€å€‹ unit æ‰€å°æ‡‰çš„ <code class=\"language-text\">box-shadow</code> å€¼ï¼Œä¾æ­¤é¡æ¨æŠŠæ¯å€‹å–®ä½å€å¡Šéƒ½è½‰æ›å®Œå³å¯ã€‚</p>\n<p>å¯¦ä½œä¸Šçš„æ­¥é©Ÿæ¯”è¼ƒç¹ç‘£ä¸€äº›ï¼Œä½†æ¦‚å¿µæ˜¯ç›¸åŒçš„ï¼š</p>\n<ul>\n<li>åˆ©ç”¨ <code class=\"language-text\">URL.createObjectURL(event.target.files[0]);</code> å°‡åœ–ç‰‡æª”æ¡ˆè½‰æ›æˆ <code class=\"language-text\">Image</code> ç‰©ä»¶ã€‚</li>\n<li>åœ¨ image <code class=\"language-text\">onload</code> æ™‚ï¼Œé€é canvas 2d context çš„ <code class=\"language-text\">drawImage()</code> å‡½å¼å°‡åœ–ç‰‡ç¹ªè£½åˆ° canvas ä¸Šã€‚</li>\n<li>æ¥è‘—å†ä»¥ canvas 2d context çš„ <code class=\"language-text\">getImageData</code> å–å¾—ä¸€å€‹ä»¥ä¸€ç¶­é™£åˆ—å­˜æ”¾çš„åœ–ç‰‡è³‡è¨Šã€‚</li>\n<li>éæ­·è©²ä¸€ç¶­é™£åˆ—å…§çš„åœ–ç‰‡è³‡è¨Šï¼Œçµ„åˆå‡º <code class=\"language-text\">box-shadow</code> çš„å€¼ã€‚</li>\n</ul>\n<p>ä¸Šè¿°æ­¥é©Ÿä¸­ï¼Œæœ€é—œéµçš„å°±æ˜¯æœ€å¾Œä¸€é»ï¼Œcanvas 2d context çš„ <code class=\"language-text\">getImageData</code> å‡½å¼æœƒå›å‚³ä¸€å€‹ä¸€ç¶­é™£åˆ— - <code class=\"language-text\">Unit8ClampedArray</code>ï¼Œè£¡é¢åŒ…å«äº†åœ–ç‰‡æ¯å€‹ unit çš„ RGBA å€¼ï¼ˆå€¼æ®µå€é–“ç‚º 0 ~ 255ï¼‰ã€‚</p>\n<p>åˆ©ç”¨é€™å€‹ä¸€ç¶­é™£åˆ—ï¼Œæˆ‘å€‘å°±å¯ä»¥çŸ¥é“è¼‰å…¥çš„åœ–ç‰‡æœ‰å¤šå°‘ unitï¼ˆgrid system)ï¼Œæ¯å€‹ unit åˆå„è‡ªæ˜¯ä»€éº¼é¡è‰²ï¼Œé€²è€Œæ¨ç®—å‡º box-shadow æ¯ä¸€å€‹å€¼çš„ x-offsetã€y-offset èˆ‡é¡è‰²ã€‚é€™ä¹Ÿæ˜¯ç‚ºä½•æˆ‘å€‘éœ€è¦å…ˆå°‡åœ–ç‰‡ç¹ªè£½åˆ° Canvas çš„åŸå› ã€‚ </p>\n<p>é—œéµç¨‹å¼ç¢¼å¦‚ä¸‹ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">buildPixelArt</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">pixelSize <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> image<span class=\"token punctuation\">,</span> canvas<span class=\"token punctuation\">,</span> canvasContext</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> width <span class=\"token operator\">=</span> image<span class=\"token punctuation\">.</span>width<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> height <span class=\"token operator\">=</span> image<span class=\"token punctuation\">.</span>height<span class=\"token punctuation\">;</span>\n\n  canvas<span class=\"token punctuation\">.</span>width <span class=\"token operator\">=</span> width<span class=\"token punctuation\">;</span>\n  canvas<span class=\"token punctuation\">.</span>height <span class=\"token operator\">=</span> height<span class=\"token punctuation\">;</span>\n  canvasContext<span class=\"token punctuation\">.</span><span class=\"token function\">drawImage</span><span class=\"token punctuation\">(</span>image<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">const</span> boxShadow <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> data<span class=\"token operator\">:</span> imageData <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> canvasContext<span class=\"token punctuation\">.</span><span class=\"token function\">getImageData</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> width<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> n <span class=\"token operator\">=</span> imageData<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> n<span class=\"token punctuation\">;</span> i <span class=\"token operator\">+=</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> a <span class=\"token operator\">=</span> imageData<span class=\"token punctuation\">[</span>i <span class=\"token operator\">+</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>a <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> row <span class=\"token operator\">=</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">ceil</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">+</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">4</span> <span class=\"token operator\">/</span> width <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">const</span> col <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">+</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">4</span> <span class=\"token operator\">-</span> row <span class=\"token operator\">*</span> width <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n      boxShadow<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>\n        col <span class=\"token operator\">*</span> pixelSize <span class=\"token operator\">+</span>\n          <span class=\"token string\">\"px \"</span> <span class=\"token operator\">+</span>\n          row <span class=\"token operator\">*</span> pixelSize <span class=\"token operator\">+</span>\n          <span class=\"token string\">\"px \"</span> <span class=\"token operator\">+</span>\n          <span class=\"token function\">getColor</span><span class=\"token punctuation\">(</span>imageData<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> imageData<span class=\"token punctuation\">[</span>i <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> imageData<span class=\"token punctuation\">[</span>i <span class=\"token operator\">+</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> a <span class=\"token operator\">/</span> <span class=\"token number\">255</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p> <code class=\"language-text\">Unit8ClampedArray</code> é™£åˆ—è£¡é¢ï¼Œæ¯å››å€‹ indices ç‚ºä¸€å–®ä½ï¼Œåˆ†åˆ¥ç‚ºè©² unit çš„ <code class=\"language-text\">R</code>ã€<code class=\"language-text\">G</code>ã€<code class=\"language-text\">B</code>ã€<code class=\"language-text\">A</code> å€¼ï¼Œæ‰€ä»¥åœ¨è¿´åœˆä¸­æˆ‘å€‘ä»¥ 4 ç‚ºéå¢å–®ä½ï¼Œä¸¦ä»¥æ­¤ç‚ºè¨ˆç®—äºŒç¶­å¹³é¢ä¸­ <code class=\"language-text\">row</code> èˆ‡ <code class=\"language-text\">col</code> çš„åŸºç¤ã€‚</p>\n<p> è¨ˆç®—å‡ºä¸€ç¶­é™£åˆ—å…§æ¯å€‹ unit åœ¨äºŒç¶­å¹³é¢ä¸Šçš„è¡Œèˆ‡åˆ—å¾Œï¼Œå€‹åˆ¥ä¹˜ä¸Šå®šç¾©å¥½çš„ <code class=\"language-text\">pixelSize</code>ï¼Œå°±èƒ½ç®—å‡ºè©² unit åœ¨ <code class=\"language-text\">box-shadow</code> å€¼ä¸­çš„ x-offset èˆ‡ y-offsetï¼Œç„¶å¾Œè¯åŒé¡è‰²å€¼ä¸€èµ· push åˆ° <code class=\"language-text\">boxShadow</code> é™£åˆ—ä¸­ã€‚</p>\n<p> æœ€å¾Œåˆ©ç”¨é å…ˆå¯«å¥½çš„ css templateï¼Œå°‡ <code class=\"language-text\">boxShadow</code> æ•´åˆé€²å»å³å¯ç”¢ç”Ÿéœ€è¦çš„ css styleï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> generatedCss <span class=\"token operator\">=</span>\n   <span class=\"token string\">\"#pixel-art {\\n\"</span> <span class=\"token operator\">+</span>\n   <span class=\"token string\">\"  height: \"</span> <span class=\"token operator\">+</span>\n   height <span class=\"token operator\">*</span> pixelSize <span class=\"token operator\">+</span>\n   <span class=\"token string\">\"px;\\n\"</span> <span class=\"token operator\">+</span>\n   <span class=\"token string\">\"  width: \"</span> <span class=\"token operator\">+</span>\n   width <span class=\"token operator\">*</span> pixelSize <span class=\"token operator\">+</span>\n   <span class=\"token string\">\"px;\\n\"</span> <span class=\"token operator\">+</span>\n   <span class=\"token string\">\"}\\n\"</span> <span class=\"token operator\">+</span>\n   <span class=\"token string\">\"#pixel-art:after {\\n\"</span> <span class=\"token operator\">+</span>\n   <span class=\"token string\">'  content: \"\";\\n'</span> <span class=\"token operator\">+</span>\n   <span class=\"token string\">\"  position: absolute;\\n\"</span> <span class=\"token operator\">+</span>\n   <span class=\"token string\">\"  width: \"</span> <span class=\"token operator\">+</span>\n   pixelSize <span class=\"token operator\">+</span>\n   <span class=\"token string\">\"px;\\n\"</span> <span class=\"token operator\">+</span>\n   <span class=\"token string\">\"  height: \"</span> <span class=\"token operator\">+</span>\n   pixelSize <span class=\"token operator\">+</span>\n   <span class=\"token string\">\"px;\\n\"</span> <span class=\"token operator\">+</span>\n   <span class=\"token string\">\"  box-shadow:\\n\"</span> <span class=\"token operator\">+</span>\n   <span class=\"token string\">\"    \"</span> <span class=\"token operator\">+</span>\n   boxShadow<span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token string\">\",\\n    \"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span>\n   <span class=\"token string\">\";\\n\"</span> <span class=\"token operator\">+</span>\n   <span class=\"token string\">\"}\"</span><span class=\"token punctuation\">;</span>\n <span class=\"token keyword\">return</span> generatedCss<span class=\"token punctuation\">;</span></code></pre></div>\n<p>è¼‰å…¥ç”¢ç”Ÿçš„ CSS å¾Œï¼Œå°±å¯ä»¥çœ‹åˆ°æˆ‘å€‘ä¸Šå‚³çš„åœ–ç‰‡é‡æ–°ä»¥ <code class=\"language-text\">box-shadow</code> çš„å½¢å¼è¢«é‡çµ„åœ¨é é¢ä¸Šï¼Œå–®å–®ä¸€å€‹ <code class=\"language-text\">div</code> å°±èƒ½ç¹ªè£½å‡ºä»»ä½•åœ–å½¢ï¼è »é…·çš„å§ï¼</p>\n<p>å®Œæ•´ç¨‹å¼ç¢¼è«‹åˆ° CodeSandbox ä¸Šç¿»é–±ï¼Œå¤§éƒ¨åˆ†é‚è¼¯éƒ½åœ¨ <code class=\"language-text\">PixelArtArea.svelte</code> å…ƒä»¶èˆ‡ <code class=\"language-text\">buildPixelArt.js</code> é€™éš»æª”æ¡ˆï¼Œå…¶é¤˜ svelte éƒ¨åˆ†çš„ç¨‹å¼ç¢¼ä¹Ÿå¾ˆå¥½ç†è§£ï¼Œä¸éæˆ‘æ˜¯ç¬¬ä¸€æ¬¡ç”¨ svelteï¼Œè‹¥æœ‰ä½¿ç”¨ä¸ç•¶çš„åœ°æ–¹æ­¡è¿æŒ‡æ•™ï¼</p>\n<iframe src=\"https://codesandbox.io/embed/image-to-pixel-art-usdtn?fontsize=14&hidenavigation=1&theme=dark\" style=\"width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;\" title=\"image-to-pixel-art\" allow=\"geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media; usb\" sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"></iframe>\n<h2 id=\"æ³¨æ„äº‹é …\" style=\"position:relative;\"><a href=\"#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A0%85\" aria-label=\"æ³¨æ„äº‹é … permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>æ³¨æ„äº‹é …</h2>\n<p>åˆ©ç”¨ <code class=\"language-text\">box-shadow</code> ç¹ªåœ–åŸºæœ¬ä¸Šæ²’ä»€éº¼å¯¦è³ªæ„ç¾©ï¼Œå°±åªæ˜¯å¥½ç©è€Œå·²ï¼Œåƒè¬ä¸è¦æŠŠé€™ç”¨åˆ°æ­£å¼ç’°å¢ƒï¼Œæ•ˆèƒ½ä¹‹å·®æœƒæŠŠä½¿ç”¨è€…ç«¯çš„ç€è¦½å™¨æç•¶æ©Ÿçš„ã€‚é€™æ¬¡çš„ç¯„ä¾‹ä¹Ÿåªèƒ½åƒå¾—ä¸‹åƒç´ è¼ƒå°çš„åœ–ç‰‡ï¼Œè‹¥æ˜¯ä¸Šå‚³äº†è¼ƒå¤§çš„æª”æ¡ˆï¼Œæ‰“é–‹ Devtool æ™‚å°±æœƒç™¼ç¾ä½ çš„é é¢ crash äº†...\nå¦å¤–ï¼Œç”¢ç”Ÿå®Œçš„ CSSï¼Œç¯„ä¾‹ä¸­æˆ‘æ˜¯ç›´æ¥ append åˆ° <code class=\"language-text\">head</code> ä¸‹ï¼Œæ‰€ä»¥è‹¥æ˜¯åœ¨æ²’æœ‰é‡æ•´é é¢çš„ç‹€æ³ä¸‹ä¸Šå‚³åˆ¥çš„åœ–ç‰‡ï¼Œå°±æœƒå†åº¦ append æ–°çš„ css é€²å»ï¼Œä¹…äº†ä»¥å¾Œ head ä¹Ÿæœƒè¶Šä¾†è¶Šè‚¥ã€‚</p>\n<h1 id=\"çµè«–\" style=\"position:relative;\"><a href=\"#%E7%B5%90%E8%AB%96\" aria-label=\"çµè«– permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>çµè«–</h1>\n<p>CSS çœŸçš„å¾ˆæœ‰è¶£ï¼Œèƒ½åšå‡ºè¨±å¤šæ„æ–™ä¹‹å¤–çš„äº‹ï¼Œé›–ç„¶çµ•å¤§å¤šæ•¸æ²’ä»€éº¼ç”¨è™•ï¼Œä½†é€™ç¨®æŠ€è¡“ä¸Šçš„å‰µæ„æ‡‰ç”¨æ‰€å¸¶ä¾†çš„èˆˆå¥®æ„Ÿï¼Œæ­£æ˜¯ç¹å¿™æ–¼æ—¥å¸¸çš„é–‹ç™¼è€…å€‘æ‰€éœ€è¦çš„å§ï¼</p>\n<h2 id=\"è³‡æ–™ä¾†æº\" style=\"position:relative;\"><a href=\"#%E8%B3%87%E6%96%99%E4%BE%86%E6%BA%90\" aria-label=\"è³‡æ–™ä¾†æº permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>è³‡æ–™ä¾†æº</h2>\n<ol>\n<li><a href=\"https://una.im/sass-pixel-art/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Una Kravets çš„éƒ¨è½æ ¼</a></li>\n<li><a href=\"https://codepen.io/andrewarchi/pen/jPbqMx?editors=0010\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Convert an image to CSS Box Shadows</a> </li>\n<li><a href=\"https://codepen.io/nucliweb/pen/oXMYyL?editors=1100\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">iron man</a></li>\n</ol>","id":"a6d5585c-9df1-505f-89da-f2b735b10a03","fields":{"slug":"box-shadow-drawing"},"frontmatter":{"date":"2020-02-01T17:31:23.000Z","title":"åˆ©ç”¨ box-shadow ç•«å‡ºä»»ä½•åœ–æ¡ˆ","tags":["css","box-shadow","drawing"],"type":"tech","slug":"box-shadow-drawing"},"timeToRead":6},"next":{"excerpt":"å¥½æ­Œåˆ†äº«ï¼šMonkey Majik + å‰ç”°å…„å¼Ÿ - Change","html":"<blockquote>\n<p>å¥½æ­Œåˆ†äº«ï¼š<a href=\"https://youtu.be/WK1wwgMpFDg\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Monkey Majik + å‰ç”°å…„å¼Ÿ - Change</a></p>\n</blockquote>\n<iframe width=\"100%\" height=\"315\" src=\"https://www.youtube.com/embed/WK1wwgMpFDg\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>\n<!-- more -->\n<h1 id=\"å‰è¨€\" style=\"position:relative;\"><a href=\"#%E5%89%8D%E8%A8%80\" aria-label=\"å‰è¨€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>å‰è¨€</h1>\n<p>å¥½ä¸€é™£å­ä¹‹å‰åœ¨ç¶²è·¯ä¸Šçœ‹åˆ° <a href=\"https://stenciljs.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Stencil JS</a>ï¼ŒåŸä»¥ç‚ºæ˜¯è·Ÿ CSS ç›¸é—œçš„æ¡†æ¶ï¼Œæ²’æƒ³åˆ°æ˜¯ <a href=\"https://ionicframework.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">ionic åœ˜éšŠ</a> è£½ä½œçš„ Web Component å·¥å…·ï¼Œåœ¨ GitHub ä¸Šæœ‰ä¸ƒåƒå¤šé¡†æ˜Ÿæ˜Ÿï¼Œçœ‹ä¾†æ˜¯æ·±å—å–œæ„›ï¼Œä½†ç•¶æ™‚æˆ‘å°æ–¼ Web Component å­˜æœ‰ä¸€äº›ç–‘æ…®ï¼Œæ‰€ä»¥æ²’æœ‰å¤šåŠ ç ”ç©¶ï¼Œä¾‹å¦‚ï¼Œé›–ç„¶ä¸»æ‰“ç”¨ Browser åŸç”Ÿæ”¯æ´çš„ Custom Elements ä¾†æ¸²æŸ“å…±ç”¨å…ƒä»¶ï¼Œèƒ½å…±ç”¨åœ¨ä»»ä½•å‰ç«¯æ¡†æ¶ä¸Šï¼Œä½†å…¶å¯¦ä¹Ÿæ„å‘³è‘—ï¼Œä½¿ç”¨é€™å…±ç”¨å…ƒä»¶çš„åœ˜éšŠï¼Œå°æ–¼é€™å€‹å…ƒä»¶çš„æŒæ§åŠ›ä¹Ÿé™ä½äº†ï¼Œè‹¥æ˜¯æƒ³è¦ä¿®æ”¹å…ƒä»¶çš„è¡Œç‚ºï¼Œä¸å¯é¿å…çš„ä¹Ÿå¾—å»å­¸ç¿’å¦‚ä½•ä¿®æ”¹ Web Componentï¼Œåè€Œå¾’å¢æˆæœ¬ã€‚\nä¸éå¾å¦ä¸€å€‹è§’åº¦æƒ³ï¼Œä»Šå¤©è‹¥æœ‰å°ˆé–€çš„åœ˜éšŠåˆ©ç”¨ Web Component ä¾†å»ºæ§‹èˆ‡ç¶­è­·ä¸€æ•´å¥— Design System çš„è©±ï¼Œå¯èƒ½å°±æœƒæ˜¯ä¸éŒ¯çš„é¸æ“‡ã€‚</p>\n<p>ç¸½ä¹‹ï¼Œæœ€è¿‘å¶ç„¶é–“è½åˆ°é«˜æ‰‹å­¸å¼Ÿå†åº¦æåŠ Stencil çš„åå­—ï¼ŒåŠ ä¸Šæˆ‘åœ¨ä¿®æ”¹å€‹äººç¶²ç«™çš„æ™‚å€™ï¼Œæ­£å¥½æƒ³åœ¨æ–‡ç« é åŠ å…¥é¡ä¼¼ Medium çš„æ‹æ‰‹å…ƒä»¶ï¼Œè¦ºå¾—å¯ä»¥åˆ©ç”¨é€™æ©Ÿæœƒä¾†è©¦è©¦çœ‹ï¼Œç”¨ Stencil ä¾†è£½ä½œä¸€å€‹èƒ½åœ¨ React æˆ–å…¶ä»–å‰ç«¯æ¡†æ¶ä¸Šèƒ½é‹è¡Œçš„ Web Componentï¼Œç”¨é€™ç¯‡æ–‡ç« è¨˜éŒ„ä¸‹éç¨‹ã€‚</p>\n<p>å…ˆçœ‹çœ‹æˆå“ï¼š</p>\n<iframe height=\"410\" style=\"width: 100%;\" scrolling=\"no\" title=\"claps-button web component\" src=\"https://codepen.io/arvin0731/embed/preview/ExjGBNq?height=410&theme-id=dark&default-tab=result\" frameborder=\"no\" allowtransparency=\"true\" allowfullscreen=\"true\">\n  See the Pen <a href='https://codepen.io/arvin0731/pen/ExjGBNq'>claps-button web component</a> by Arvin\n  (<a href='https://codepen.io/arvin0731'>@arvin0731</a>) on <a href='https://codepen.io'>CodePen</a>.\n</iframe>\n<p>é»æ“Šæ‹æ‰‹ emoji æ™‚ï¼Œé™¤äº†è¨˜éŒ„é»æ“Šæ¬¡æ•¸å¤–ï¼Œé‚„æœƒæœ‰å…‰é»ç”±å¤–è‡³å…§è¢«å¸å¼•åˆ°æ‰‹ä¸Šï¼Œæœ€å¾Œè®“æ‹æ‰‹ emoji çš„é¡è‰²ç”±ç°éšè½‰é»ƒå†ç™¼ç´…å…‰ï¼Œç‡Ÿé€ å‡ºä¸€ç¨®å…ƒæ°£å½ˆå¸æ”¶èƒ½é‡çš„æ„Ÿè¦ºã€‚</p>\n<p>æ‡¶å¾—çœ‹æ–‡ç« çš„å¯ä»¥åˆ° GitHub ä¸Šçœ‹åŸå§‹ç¢¼ï¼š<a href=\"https://github.com/ArvinH/claps-button\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://github.com/ArvinH/claps-button</a></p>\n<h2 id=\"stencil-ç°¡ä»‹\" style=\"position:relative;\"><a href=\"#stencil-%E7%B0%A1%E4%BB%8B\" aria-label=\"stencil ç°¡ä»‹ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Stencil ç°¡ä»‹</h2>\n<blockquote>\n<p>Stencil is a compiler that generates Web Components (more specifically, Custom Elements). Stencil combines the best concepts of the most popular frameworks into a simple build-time tool.</p>\n</blockquote>\n<p>åœ¨å®˜ç¶²ä¸Šæ¸…æ¥šçš„å¯«åˆ° Stencil çš„å®šä½æ˜¯ä¸€å€‹ Compilerï¼Œç”¨äº†ç›®å‰æµè¡Œçš„ tech stack ä¾†è£½ä½œå‡ºå®Œå…¨ç¬¦åˆæ¨™æº–çš„ Web Componentsã€‚</p>\n<p>åƒè€ƒäº† React çš„ Virtual DOMã€Fiber çš„ Async renderingã€reactive data-bindingï¼Œä¸¦æ”¯æ´ TypeScript å’Œ JSX èªæ³•ã€‚å°æ–¼ç¿’æ…£ç”¨ React é–‹ç™¼çš„äººä¾†èªªï¼Œç®—æ˜¯éå¸¸å¥½ä¸Šæ‰‹çš„ä¸€å¥—å·¥å…·ã€‚</p>\n<p>å®˜ç¶²ä¸Šçš„æ–‡æª”æ¸…æ™°æ˜ç­ï¼Œè€Œä¸”å¾ˆå¥½é–±è®€ï¼Œä¸€è·¯å¾ Introduction é †è‘—è®€ä¸‹å»ï¼Œå°±æœƒé»˜é»˜æŠŠå„ç¨®åŠŸèƒ½èˆ‡ API ä¹Ÿéƒ½çœ‹éä¸€éï¼ŒåŒ…å«å¦‚ä½•æ•´åˆåœ¨ä¸åŒçš„å‰ç«¯æ¡†æ¶ä¸­çš„è³‡è¨Šã€‚</p>\n<p>å…¶ä¸­ä¹ŸèŠ±äº†ä¸€äº›ç¯‡å¹…åœ¨ä»‹ç´¹ç‚ºä»€éº¼ä»–å€‘è¦è£½ä½œé€™å¥—å·¥å…·ï¼Œä»¥åŠä»–å€‘çš„ç›®çš„æ˜¯ä»€éº¼ã€‚å°æ–¼ä»–å€‘çš„å‡ºç™¼é»èˆ‡ç›®æ¨™ï¼Œæˆ‘è¦ºå¾—è »æœ‰æ„æ€çš„ï¼š</p>\n<blockquote>\n<p>Stencil aims to combine the best concepts of the most popular frontend frameworks into a compile-time tool rather than run-time tool.</p>\n</blockquote>\n<p>ä»–å€‘å°æ–¼ Stencil çš„å®šä½æ˜¯å±¬æ–¼ <code class=\"language-text\">compile-time tool</code>ï¼Œæ‡‰ç”¨å„ç¨®å·¥å…·æœ€ä½³åŒ–é–‹ç™¼é«”é©—ï¼Œæœ€çµ‚ç·¨è­¯å‡ºç¬¦åˆ Web Standards ä¸”èƒ½é‹è¡Œåœ¨å¤šæ•¸ç€è¦½å™¨çš„å…ƒä»¶ã€‚</p>\n<p>ç‚ºæ­¤ï¼Œä»–å€‘æä¾›äº† out-of-the-box çš„æŒ‰éœ€åŠ è¼‰ï¼Œé€™é»å°æ–¼ Web Component ä¾†èªªéå¸¸é‡è¦ï¼Œä¹Ÿå¤§å¤§æé«˜æˆ‘çš„ä½¿ç”¨æ„é¡˜ï¼›API éƒ¨åˆ†ä»–å€‘æ˜¯å¾ Web Component æ¨™æº–çš„ lifecycle ä¸Šå†åšå»¶ä¼¸ï¼Œä¸¦æ²’æœ‰å¤ªå¤šä»–å€‘è‡ªå·±çš„å®¢è£½åŒ– APIï¼Œå­¸ç¿’æ›²ç·šç›¸å°ä½ï¼Œä½†é‚„æ˜¯èƒ½ä¿æœ‰è‰¯å¥½çš„é–‹ç™¼é«”é©—ï¼Œåƒæ˜¯åœ¨ä½¿ç”¨ Framework é–‹ç™¼ä¸€èˆ¬ã€‚</p>\n<p>æœ‰èˆˆè¶£çš„è®€è€…å¯ä»¥å‰å¾€<a href=\"https://stenciljs.com/docs/goals-and-objectives\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">å®˜ç¶²</a>é–±è®€ï¼Œå…§å®¹ä¸ç®—å¤ªå¤šï¼Œå¾ˆå¿«èƒ½æƒéä¸€éã€‚</p>\n<h2 id=\"å¦‚ä½•è£½ä½œ\" style=\"position:relative;\"><a href=\"#%E5%A6%82%E4%BD%95%E8%A3%BD%E4%BD%9C\" aria-label=\"å¦‚ä½•è£½ä½œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>å¦‚ä½•è£½ä½œ</h2>\n<h3 id=\"å°ˆæ¡ˆè¨­å®š\" style=\"position:relative;\"><a href=\"#%E5%B0%88%E6%A1%88%E8%A8%AD%E5%AE%9A\" aria-label=\"å°ˆæ¡ˆè¨­å®š permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>å°ˆæ¡ˆè¨­å®š</h3>\n<p>æ¥ä¸‹ä¾†å°±èªªæ˜å¦‚ä½•ä½¿ç”¨ Stencil ä¾†è£½ä½œ Web Componentã€‚</p>\n<p>é¦–å…ˆæˆ‘å€‘åˆ©ç”¨ Stencil çš„ cli é–‹å•Ÿä¸€å€‹å°ˆæ¡ˆï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> init stencil</code></pre></div>\n<p>ä½ å¯ä»¥çœ‹åˆ°æˆ‘å€‘å…¶å¯¦æœ‰ä¸‰ç¨®é¸æ“‡ï¼š<code class=\"language-text\">ionic-pwa</code>ã€<code class=\"language-text\">app</code>ã€<code class=\"language-text\">component</code></p>\n<p><img src=\"/image/stencil-cli.png\" alt=\"stencil-cli\" title=\"stencil-cli\"></p>\n<p>ionic-pwa èˆ‡ app éƒ½æ˜¯ç”¨ä¾†å»ºæ§‹ä¸€å€‹å®Œæ•´ Web application çš„ starter kitï¼Œå–®ç´”å»ºæ§‹ Component çš„è©±åªéœ€è¦é¸æ“‡ component é€™å€‹ starter kit å³å¯ã€‚æœ‰èˆˆè¶£çš„è®€è€…ä¹Ÿå¯ä»¥è£ ionic-pwa èˆ‡ app è©¦è©¦çœ‹ï¼ŒStencil æä¾›äº†è‡ªå·±çš„ router \bèˆ‡ redux libï¼Œè®“ä½ èƒ½æœ‰èˆ‡é–‹ç™¼ç›®å‰ä¸€èˆ¬å‰ç«¯æ‡‰ç”¨ç¨‹å¼ç›¸ä¼¼çš„é«”é©—ã€‚</p>\n<p>é¸æ“‡å®‰è£å¥½ <code class=\"language-text\">component starter kit</code> å¾Œï¼Œå¯ä»¥çœ‹åˆ°ä¸‹é¢çš„å°ˆæ¡ˆçµæ§‹ï¼š</p>\n<p><img src=\"/image/stencil-starter-kit-structure.png\" alt=\"stencil-starter-kit-structure\" title=\"stencil starter kit structure\"></p>\n<p>é‡é»åªæœ‰ä¸€å€‹ï¼Œå°±æ˜¯ <code class=\"language-text\">components</code> è³‡æ–™å¤¾ï¼Œåº•ä¸‹åŒ…å«äº† e2e æ¸¬è©¦çš„æª”æ¡ˆã€css æª”èˆ‡ component ä¸»ç¨‹å¼æ‰€åœ¨çš„ <code class=\"language-text\">my-component.tsx</code>ã€‚å¯ä»¥çœ‹åˆ°éƒ½æ˜¯ç”± Typescript ç‚ºä¸»è¦ stackï¼Œå…¶ä¸­çš„ type file <code class=\"language-text\">components.d.ts</code> åœ¨ä½  <code class=\"language-text\">build</code> èˆ‡ <code class=\"language-text\">run dev</code> çš„éç¨‹ä¸­æœƒè‡ªå‹•å¹«ä½  codegen å‡ºä¾†ã€‚</p>\n<p>å…¶ä¸­çš„ <code class=\"language-text\">index.html</code> æ˜¯ <code class=\"language-text\">run dev</code> æ™‚çš„ä¸»è¦ html templateï¼Œä½ å¯ä»¥åœ¨é€™é‚Šæ¸¬è©¦ä½ è¨­è¨ˆçš„ component ä½¿ç”¨æƒ…å¢ƒã€‚</p>\n<p>æ¥è‘—ä¾†çœ‹ä¸€ä¸‹ package.json çš„å…§å®¹ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"my-first-component\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"0.0.1\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Stencil Component Starter\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"main\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"dist/index.js\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"module\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"dist/index.mjs\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"es2015\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"dist/esm/index.mjs\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"es2017\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"dist/esm/index.mjs\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"types\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"dist/types/index.d.ts\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"collection\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"dist/collection/collection-manifest.json\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"collection:main\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"dist/collection/index.js\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"unpkg\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"dist/my-first-component/my-first-component.js\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"files\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"dist/\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">\"loader/\"</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"stencil build --docs\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"stencil build --dev --watch --serve\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"test\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"stencil test --spec --e2e\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"test.watch\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"stencil test --spec --e2e --watchAll\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"generate\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"stencil generate\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"devDependencies\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"@stencil/core\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"^1.8.8\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"license\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"MIT\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>åŸºæœ¬çš„ npm script éƒ½å¹«ä½ æº–å‚™å¥½äº†ï¼Œç•¶ä½  <code class=\"language-text\">npm run build</code> çš„æ™‚å€™ï¼Œé™¤äº†åŸºæœ¬çš„ main - <code class=\"language-text\">dist/index.js</code> å¤–ï¼Œmodule æ¨¡å¼çš„ <code class=\"language-text\">dist/index.mjs</code> èˆ‡ <code class=\"language-text\">es2015</code>ã€<code class=\"language-text\">es2017</code> çš„ç·¨è­¯ç‰ˆæœ¬éƒ½æœ‰ï¼Œç”šè‡³æº–å‚™äº†çµ¦ <code class=\"language-text\">unpkg</code> ä½¿ç”¨çš„ destinationã€‚</p>\n<p>å”¯ä¸€ä¸€é»è¦æ³¨æ„çš„æ˜¯ï¼Œç•¶ä½ æº–å‚™è¦ publish ä½ çš„ component åˆ° npm ä¸Šï¼Œè®“äººé€é <a href=\"https://unpkg.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">unpkg</a> ä½¿ç”¨æ™‚ï¼Œè¨˜å¾—ä¸€å®šè¦å…ˆ <code class=\"language-text\">npm run build</code>ï¼Œç”¢ç”Ÿ production build æ‰æœƒæœ‰çš„ç·¨è­¯æª”æ¡ˆï¼Œé€™æ¨£æ‰èƒ½å¤ æ­£ç¢ºåœ°è¢«äººå¼•å…¥ä½¿ç”¨ã€‚</p>\n<p>å¦å¤–ï¼Œè£¡é¢å”¯ä¸€æ¯”è¼ƒç‰¹æ®Šçš„ config æª”æ¡ˆ - <code class=\"language-text\">stencil.config.ts</code> å‰‡æ˜¯ç”¨ä¾†è¨­å®šå„ç¨® stencil plugin çš„ï¼Œä¾‹å¦‚åœ¨æˆ‘çš„ç¯„ä¾‹ä¸­ï¼Œæˆ‘ä½¿ç”¨äº† SCSSï¼Œé€™æ™‚å°±å¯ä»¥åœ¨æ­¤ config æª”ä¸­è¨­å®š scss pluginï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Config <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@stencil/core'</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// sass plugin</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> sass <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@stencil/sass'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> config<span class=\"token operator\">:</span> Config <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  namespace<span class=\"token operator\">:</span> <span class=\"token string\">'claps-button'</span><span class=\"token punctuation\">,</span>\n  outputTargets<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      type<span class=\"token operator\">:</span> <span class=\"token string\">'dist'</span><span class=\"token punctuation\">,</span>\n      esmLoaderPath<span class=\"token operator\">:</span> <span class=\"token string\">'../loader'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      type<span class=\"token operator\">:</span> <span class=\"token string\">'docs-readme'</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">{</span>\n      type<span class=\"token operator\">:</span> <span class=\"token string\">'www'</span><span class=\"token punctuation\">,</span>\n      serviceWorker<span class=\"token operator\">:</span> <span class=\"token keyword\">null</span> <span class=\"token comment\">// disable service workers</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token comment\">// can setup plugins here</span>\n  plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token function\">sass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"ç¨‹å¼é–‹ç™¼\" style=\"position:relative;\"><a href=\"#%E7%A8%8B%E5%BC%8F%E9%96%8B%E7%99%BC\" aria-label=\"ç¨‹å¼é–‹ç™¼ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ç¨‹å¼é–‹ç™¼</h3>\n<p>åˆ©ç”¨ starter kit æŠŠå°ˆæ¡ˆå»ºç«‹å¥½ï¼Œæ¥è‘—æŠŠåç¨±æ”¹æˆè‡ªå·±çš„ component å¾Œï¼Œå°±èƒ½é–‹å§‹æ­£å¼æ’°å¯«ç¨‹å¼ç¢¼ã€‚</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Component<span class=\"token punctuation\">,</span> Prop<span class=\"token punctuation\">,</span> State<span class=\"token punctuation\">,</span> Listen<span class=\"token punctuation\">,</span> h<span class=\"token punctuation\">,</span> Host <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@stencil/core'</span><span class=\"token punctuation\">;</span>\n<span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Component</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  tag<span class=\"token operator\">:</span> <span class=\"token string\">'claps-button'</span><span class=\"token punctuation\">,</span>\n  styleUrl<span class=\"token operator\">:</span> <span class=\"token string\">'claps-button.scss'</span><span class=\"token punctuation\">,</span>\n  shadow<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MyComponent</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">State</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> count<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Prop</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> color<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Listen</span></span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> capture<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    e<span class=\"token punctuation\">.</span><span class=\"token function\">stopPropagation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>count <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>Host<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>div <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"counter\"</span> style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n          color<span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>color<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>div\n          <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"claps-btn-container\"</span>\n          data<span class=\"token operator\">-</span>count<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">}</span>\n          onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick<span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">></span>\n          ğŸ‘\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Host<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"ä¸€æ­¥æ­¥è§£æ\" style=\"position:relative;\"><a href=\"#%E4%B8%80%E6%AD%A5%E6%AD%A5%E8%A7%A3%E6%9E%90\" aria-label=\"ä¸€æ­¥æ­¥è§£æ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ä¸€æ­¥æ­¥è§£æ</h3>\n<p><strong>@Component</strong> decorator æä¾› Stencil compiler é—œæ–¼ä½ çš„å…ƒä»¶çš„ Metadataã€‚å…¶ä¸­ï¼Œ<code class=\"language-text\">tag</code> é¡§åæ€ç¾©å°±æ˜¯ä½ å…ƒä»¶çš„ tag åç¨±è¦å«åšä»€éº¼ï¼›<code class=\"language-text\">styleUrl</code> æ¨™ç¤ºå‡ºä½ è¦å¼•å…¥çš„ css æª”æ¡ˆï¼›<code class=\"language-text\">shadow</code> ä»£è¡¨ä½ çš„å…ƒä»¶æ˜¯å¦è¦ä½¿ç”¨ shadow domã€‚</p>\n<p>ä½¿ç”¨ shadow dom çš„å·®åˆ¥åœ¨æ–¼ä½ æƒ³ä¸æƒ³è¦å…ƒä»¶å…§çš„æ‰€æœ‰å…ƒç´ è¢«å°è£èµ·ä¾†ã€‚ä¸æ¸…æ¥šä½•è¬‚ shadow dom çš„å¯ä»¥çœ‹ <a href=\"https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_shadow_DOM\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">MDN çš„èªªæ˜</a>ã€‚è‹¥æ˜¯ä½ æœ‰é–‹å•Ÿ shadow domï¼Œä½ çš„å…ƒä»¶åœ¨ HTML Tree ä¸­æœƒé•·å¾—åƒé€™æ¨£ï¼š</p>\n<p><img src=\"/image/stencil-shadowdom.png\" alt=\"shadow-dom\" title=\"shadow dom\"></p>\n<p>ä¸‹é¢å¯¦éš› Component å¯¦ä½œçš„éƒ¨åˆ†ï¼Œå‰‡è·Ÿ React Component é¡ä¼¼ï¼Œä¸€æ¨£æœ‰ <code class=\"language-text\">render</code> å‡½å¼å›å‚³ <code class=\"language-text\">JSX</code>ï¼›ã„§æ¨£æœ‰ private/public method å¯ä»¥å®£å‘Šä½¿ç”¨ã€‚</p>\n<p>ä½ å¯ä»¥åˆ©ç”¨ <code class=\"language-text\">@State()</code> èˆ‡ <code class=\"language-text\">@Prop()</code> å…©å€‹ decorator ä¾†å®£å‘Šå…ƒä»¶çš„ç‹€æ…‹(state) èˆ‡å¯æ¥å—çš„ Propsã€‚</p>\n<p><code class=\"language-text\">@Listen()</code> decorator å‰‡æ˜¯ Stencil ç”¨ä¾†ç›£è½å¤–éƒ¨ DOM Event çš„ï¼Œå¯ä»¥å‚³å…¥ä¸åŒçš„ optionï¼Œåƒæ˜¯ä¸Šé¢ç¯„ä¾‹ä¸­çš„ <code class=\"language-text\">{ capture: true }</code> å°±æ˜¯å‘ŠçŸ¥æˆ‘å€‘è¦åœ¨ Capture éšæ®µ fire listenerï¼›ä¹Ÿå¯ä»¥æŒ‡å®š <code class=\"language-text\">target</code>ï¼Œå‘Šè¨´ Stencil ä½ è¦æŠŠé€™å€‹ listener ç¶å®šåœ¨èª°èº«ä¸Šï¼Œåƒæ˜¯ scroll eventï¼Œå¯ä»¥ target åœ¨ window ä¸Šï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">@<span class=\"token function\">Listen</span><span class=\"token punctuation\">(</span><span class=\"token string\">'scroll'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> target<span class=\"token operator\">:</span> <span class=\"token string\">'window'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">handleScroll</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">ev</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'the body was scrolled'</span><span class=\"token punctuation\">,</span> ev<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>æ­¤å¤–ï¼Œé‚„æœ‰å€‹ <code class=\"language-text\">@Event()</code> decorator å¯ä»¥ç”¨ä¾† emit data è·Ÿ eventï¼Œä¸¦ç”¨ <code class=\"language-text\">@Listen()</code> decorator æ•ç²ã€‚è©³æƒ…å¯ä»¥<a href=\"https://stenciljs.com/docs/events\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">åƒé–±å®˜ç¶²</a>ã€‚</p>\n<p>æœ€å¾Œåœ¨ render å‡½å¼ä¸­æœ‰å€‹ç‰¹åˆ¥çš„ Element å«åš <code class=\"language-text\">Host</code>ï¼Œåœ¨ Web component çš„ä¸–ç•Œä¸­ï¼Œhost environment ä»£è¡¨çš„æ˜¯ <em>host</em> ä½ çš„ custom web component çš„ç’°å¢ƒï¼Œé€šå¸¸å°±æ˜¯ä¸€èˆ¬çš„ DOM Treeï¼Œè€Œé€™é‚Šçš„ <code class=\"language-text\">Host</code> component ä¹Ÿé›·åŒï¼Œä»£è¡¨çš„å°±æ˜¯ä½ çš„ Web component æœ¬èº«ï¼Œä½ å‚³å…¥çµ¦ Host element çš„å±¬æ€§éƒ½æœƒåæ˜ åœ¨ web component çš„ tag èº«ä¸Šã€‚å¾å®˜ç¶²çµ¦çš„ç¯„ä¾‹ä¾†çœ‹å¯èƒ½æœƒæ›´æ¸…æ¥šï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Component</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>tag<span class=\"token operator\">:</span> <span class=\"token string\">'todo-list'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TodoList</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Prop</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> open <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>Host\n        aria<span class=\"token operator\">-</span>hidden<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>open <span class=\"token operator\">?</span> <span class=\"token string\">'false'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'true'</span><span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n          <span class=\"token string\">'todo-list'</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n          <span class=\"token string\">'is-open'</span><span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>open\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>æ ¹æ“šå‚³å…¥ä½ çš„ custom tag çš„å±¬æ€§ <code class=\"language-text\">open</code> çš„ç‹€æ…‹ï¼Œæœƒæ”¹è®Šå…¶ <code class=\"language-text\">aria-hidden</code> å±¬æ€§çš„å…§å®¹ã€‚</p>\n<p>å¦‚æœ <code class=\"language-text\">this.open === true</code>ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token operator\">&lt;</span>todo<span class=\"token operator\">-</span>list <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"todo-list open\"</span> aria<span class=\"token operator\">-</span>hidden<span class=\"token operator\">=</span><span class=\"token string\">\"false\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>todo<span class=\"token operator\">-</span>list<span class=\"token operator\">></span></code></pre></div>\n<p>æ­¤å¤–ï¼Œ<code class=\"language-text\">Host</code> element ä¹Ÿå¯ä»¥å–®ç´”ç”¨ä¾†å–ä»£ React ä¸­çš„ <code class=\"language-text\">Fragement</code>ã€‚</p>\n<h3 id=\"å…¶ä»–ç´°ç¯€èˆ‡æ³¨æ„äº‹é …\" style=\"position:relative;\"><a href=\"#%E5%85%B6%E4%BB%96%E7%B4%B0%E7%AF%80%E8%88%87%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A0%85\" aria-label=\"å…¶ä»–ç´°ç¯€èˆ‡æ³¨æ„äº‹é … permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>å…¶ä»–ç´°ç¯€èˆ‡æ³¨æ„äº‹é …</h3>\n<p>è‡³æ­¤ç‚ºæ­¢å…¶å¯¦å°±å·²ç¶“å¯ä»¥ç”¢å‡ºä¸€å€‹ Web Component äº†ï¼Œæ¥ä¸‹ä¾†è¦åšçš„å°±éƒ½åªæ˜¯åŠ å…¥å…ƒä»¶æ‰€éœ€çš„å¯¦ä½œç´°ç¯€ï¼Œä¸‹é¢ç¨‹å¼ç¢¼æˆ‘çœç•¥äº†ä¸€äº›ç”¢ç”Ÿå‹•ç•«çš„ç´°ç¯€ï¼Œæœ‰èˆˆè¶£çš„å¯ä»¥<a href=\"https://github.com/ArvinH/claps-button\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">å¾ GitHub ä¸Šåƒè€ƒåŸå§‹ç¢¼</a>ï¼Œå¯¦ä½œæ–¹å¼å…¶å¯¦å¾ˆç°¡å–®æš´åŠ›ï¼Œå°±æ˜¯å›ºå®šç”¢ç”Ÿè¨±å¤šå°å…‰é»ï¼Œç„¶å¾Œç®—å¥½åœ“å½¢åº§æ¨™çš„ä½ç½®èˆ‡ä½ç§»ï¼Œä¸¦åˆ©ç”¨ <code class=\"language-text\">animate API</code> ä¾†åŠ ä¸Š <code class=\"language-text\">keyframe</code>ï¼Œåœ¨é»æ“Šæ‹æ‰‹ emoji çš„æ™‚å€™è§¸ç™¼å‹•ç•«ï¼Œä¸¦åŠ ä¸Š <code class=\"language-text\">text-shadow</code> èˆ‡ <code class=\"language-text\">filter: grayscale</code> çš„å±¬æ€§ä¾†å¢åŠ æ•ˆæœã€‚</p>\n<p>é€™é‚Šæˆ‘è‘—é‡èªªæ˜ä¸€äº›é—œæ–¼ Stencil å¯¦ä½œ web component ä¸Šçš„ä¸€äº›ç´°ç¯€ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Component</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  tag<span class=\"token operator\">:</span> <span class=\"token string\">'claps-button'</span><span class=\"token punctuation\">,</span>\n  styleUrl<span class=\"token operator\">:</span> <span class=\"token string\">'claps-button.scss'</span><span class=\"token punctuation\">,</span>\n  shadow<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MyComponent</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Element</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> el<span class=\"token operator\">:</span> HTMLElement<span class=\"token punctuation\">;</span>\n  <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">State</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> count<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n  <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Prop</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> color<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Prop</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> size<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">;</span>\n  <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Prop</span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> preserve<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token decorator\"><span class=\"token at operator\">@</span><span class=\"token function\">Listen</span></span><span class=\"token punctuation\">(</span><span class=\"token string\">'click'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> capture<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n  <span class=\"token function\">handleClick</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    e<span class=\"token punctuation\">.</span><span class=\"token function\">stopPropagation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>count <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>preserve<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">claps-wc-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>location<span class=\"token punctuation\">.</span>pathname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>count<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">runAnimation</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">componentWillLoad</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>preserve<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>count <span class=\"token operator\">=</span> <span class=\"token operator\">+</span>localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">claps-wc-</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>location<span class=\"token punctuation\">.</span>pathname<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">runAnimation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> root <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createDocumentFragment</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> rootElm  <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>el<span class=\"token punctuation\">.</span>shadowRoot<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.claps-btn-container'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token comment\">// ...ç•¥</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">generateChi</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">// ...ç•¥</span>\n      <span class=\"token comment\">// ç”¢ç”Ÿåœ“å½¢æ°£é«”é¡†ç²’æ•ˆæœ</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">const</span> chiArray <span class=\"token operator\">=</span> <span class=\"token function\">generateChi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    chiArray<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>chi <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      root<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>chi<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    rootElm<span class=\"token punctuation\">.</span><span class=\"token function\">appendChild</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>Host<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>div <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"counter\"</span> style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n          color<span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>color<span class=\"token punctuation\">,</span>\n          borderColor<span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>color<span class=\"token punctuation\">,</span>\n          width<span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>size <span class=\"token operator\">||</span> <span class=\"token string\">'3rem'</span><span class=\"token punctuation\">,</span>\n          height<span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>size <span class=\"token operator\">||</span> <span class=\"token string\">'3rem'</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>div\n          <span class=\"token keyword\">class</span><span class=\"token operator\">=</span><span class=\"token string\">\"claps-btn-container\"</span>\n          data<span class=\"token operator\">-</span>count<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">}</span>\n          onClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleClick<span class=\"token punctuation\">}</span>\n          style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n            width<span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>size <span class=\"token operator\">||</span> <span class=\"token string\">'3rem'</span><span class=\"token punctuation\">,</span>\n            height<span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>size <span class=\"token operator\">||</span> <span class=\"token string\">'3rem'</span><span class=\"token punctuation\">,</span>\n            fontSize<span class=\"token operator\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>size <span class=\"token operator\">||</span> <span class=\"token string\">'3rem'</span><span class=\"token punctuation\">,</span>\n            textShadow<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">1px 0px </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token punctuation\">(</span>\n              <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>count <span class=\"token operator\">&lt;</span> <span class=\"token number\">20</span> <span class=\"token operator\">?</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>count <span class=\"token operator\">:</span> <span class=\"token number\">20</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">px red</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n            filter<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">grayscale(</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token punctuation\">(</span>\n              <span class=\"token number\">1</span> <span class=\"token operator\">-</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>count <span class=\"token operator\">/</span> <span class=\"token number\">20</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">toFixed</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)</span><span class=\"token template-punctuation string\">`</span></span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        <span class=\"token operator\">></span>\n          ğŸ‘\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Host<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>é¦–å…ˆæ˜¯ <strong>lifecycle</strong>ï¼ŒStencil é™¤äº†æä¾› <a href=\"https://developer.mozilla.org/en-US/docs/Web/Web_Components/Using_custom_elements\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Web Component æ¨™æº–çš„ lifecycle</a> - <code class=\"language-text\">connectedCallback()</code> èˆ‡ <code class=\"language-text\">disconnectedCallback()</code> å¤–ï¼Œé‚„æä¾›äº†è¨±å¤šé¡ä¼¼ç•¶åˆ React çš„ component lifecycleï¼Œå¯ä»¥å¾å®˜æ–¹çš„åœ–æª”ä¸­ä¸€ç›®ç­ç„¶ï¼š</p>\n<p><img src=\"/image/stencil-component-lifecycle.png\" alt=\"stencil-component-lifecycle\" title=\"stencil component lifecycle\"></p>\n<p>æˆ‘å€‘ç¯„ä¾‹ä¸­ç”¨åˆ°çš„ <code class=\"language-text\">componentWillLoad</code> æœƒåœ¨ Component é€²è¡Œç¬¬ä¸€æ¬¡ render å‰è¢«å‘¼å«ï¼Œæ‰€ä»¥é©åˆç”¨ä¾† initialized dataï¼Œé€™é‚Šçš„ä¾‹å­æ˜¯å¾ localStorage ä¸­å–å‡ºè³‡æ–™ã€‚</p>\n<p>å¦ä¸€å€‹åŸ·å¾—æ³¨æ„çš„åœ°æ–¹æ˜¯å–å¾— shadow dom å…ƒç´ çš„æ–¹æ³•ã€‚</p>\n<p>åœ¨ <code class=\"language-text\">runAnimation()</code> å‡½æ•¸ä¸­ï¼Œæˆ‘éœ€è¦å°‡å‹•æ…‹ç”¢ç”Ÿçš„å…‰é»æ›è¼‰åˆ° web component çš„ shadow dom ä¸Šï¼Œè€Œè¦èƒ½å­˜å– shadow domï¼Œéœ€è¦å…ˆåˆ©ç”¨ <code class=\"language-text\">@Element()</code> decorator ä¾†å®£å‘Šä¸€å€‹ Host element çš„ referenceï¼Œè©² decorator æœƒå›å‚³ä¸€å€‹ <code class=\"language-text\">HTMLElement</code> çš„ instanceï¼Œä½ å°±èƒ½ä»¥æ­¤ä¾†å­˜å– shadow domï¼š</p>\n<p><code class=\"language-text\">const rootElm  = this.el.shadowRoot.querySelector('.claps-btn-container');</code></p>\n<p>æœ€å¾Œï¼Œé‚„æœ‰ä¸€äº›é€™æ¬¡ç¯„ä¾‹ä¸­æœªç”¨åˆ°çš„ APIï¼Œåƒæ˜¯ public method çš„ä½¿ç”¨èˆ‡é¡ä¼¼ Observable çš„ Watch decorator ç­‰ç­‰ï¼Œæœ‰èˆˆè¶£çš„è®€è€…åœ¨å‰å¾€å®˜ç¶²æŸ¥çœ‹å³å¯ï¼Œéƒ½å¯«å¾—è »æ¸…æ¥šçš„ã€‚</p>\n<p><a href=\"https://stenciljs.com/docs/decorators\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Stencil API Docs</a></p>\n<h2 id=\"å¦‚ä½•é‹ç”¨åœ¨ä¸åŒ-framework-ä¸Š\" style=\"position:relative;\"><a href=\"#%E5%A6%82%E4%BD%95%E9%81%8B%E7%94%A8%E5%9C%A8%E4%B8%8D%E5%90%8C-framework-%E4%B8%8A\" aria-label=\"å¦‚ä½•é‹ç”¨åœ¨ä¸åŒ framework ä¸Š permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>å¦‚ä½•é‹ç”¨åœ¨ä¸åŒ framework ä¸Š</h2>\n<p>ä½¿ç”¨åœ¨ä¸åŒæ¡†æ¶çš„æ–¹æ³•ï¼Œæˆ‘è©¦äº†å…©ç¨®ï¼Œé¦–å…ˆæ˜¯ Reactï¼›</p>\n<iframe\n  src=\"https://codesandbox.io/embed/webcomponent-test-react-w7lyv?fontsize=14&hidenavigation=1&theme=dark\"\n  style=\"width:100%; height:500px; border:0; border-radius: 4px; overflow:hidden;\"\n  title=\"webcomponent-test-react\"\n  allow=\"geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media; usb\"\n  sandbox=\"allow-modals allow-forms allow-popups allow-scripts allow-same-origin\"\n></iframe>\n<p>æœ€ç°¡å–®çš„æ–¹å¼å°±æ˜¯åœ¨ template index.html ä¸­æ”¾å…¥ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">'</span>https://unpkg.com/claps-button@1.0.7/dist/claps-button.js<span class=\"token punctuation\">'</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>ç„¶å¾Œå°±èƒ½åœ¨ä»»æ„ component ä¸­åŠ å…¥ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>claps-button</span> <span class=\"token attr-name\">size</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>3rem<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">preserve</span> <span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>claps-button</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>ç„¶è€Œåƒ Vue çš„è©±ï¼Œå°±æ²’è¾¦æ³•ç›´æ¥é€™æ¨£åšï¼Œå¿…é ˆè¦ä»¥ <code class=\"language-text\">npm install ${your web component}</code> çš„æ–¹å¼è¼‰å…¥åˆ°ä½ çš„ App ä¸­ï¼Œä¸¦åœ¨ <code class=\"language-text\">main.js</code> ä¸­ï¼Œå¾ stencil æä¾›çš„ loader ä¸­å» <code class=\"language-text\">defineCustomElements</code>ï¼š</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> Vue <span class=\"token keyword\">from</span> <span class=\"token string\">\"vue\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">\"./App.vue\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n  applyPolyfills<span class=\"token punctuation\">,</span>\n  defineCustomElements\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"claps-button/loader/index.cjs.js\"</span><span class=\"token punctuation\">;</span>\nVue<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>productionTip <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Tell Vue to ignore all components defined in the claps-button</span>\n<span class=\"token comment\">// package. The regex assumes all components names are prefixed</span>\n<span class=\"token comment\">// 'claps'</span>\nVue<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>ignoredElements <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token regex\"><span class=\"token regex-delimiter\">/</span><span class=\"token regex-source language-regex\">claps-\\w*</span><span class=\"token regex-delimiter\">/</span></span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Bind the custom elements to the window object</span>\n<span class=\"token function\">applyPolyfills</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">defineCustomElements</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">new</span> <span class=\"token class-name\">Vue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function-variable function\">render</span><span class=\"token operator\">:</span> <span class=\"token parameter\">h</span> <span class=\"token operator\">=></span> <span class=\"token function\">h</span><span class=\"token punctuation\">(</span>App<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">$mount</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"#app\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"but\" style=\"position:relative;\"><a href=\"#but\" aria-label=\"but permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong>Butï¼</strong></h3>\n<p>é€™æ¨£çš„åšæ³•ç›®å‰ä¼¼ä¹æœ‰è¨±å¤šå•é¡Œï¼Œæœƒä¸€ç›´å‡ºç¾ <code class=\"language-text\">TypeError: Cannot read property 'isProxied' of undefined</code> çš„ Errorï¼Œåœ¨ç¶²è·¯ä¸Šæœ‰è¨±å¤šè¨è«–ï¼Œæˆªè‡³æˆ‘å®Œæˆé€™ç¯‡æ–‡ç« ç‚ºæ­¢ï¼Œå°šæœªæœ‰çµè«–ã€‚ä¾‹å¦‚ï¼š<a href=\"https://github.com/ionic-team/stencil/issues/1661\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">GitHub ä¸Šçš„ issue</a> å’Œ <a href=\"https://en.programqa.com/question/59887533/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Svelte çš„ä¾‹å­</a></p>\n<p>æ‰€ä»¥æˆ‘æƒ³ç›®å‰å¯èƒ½é‚„æ˜¯ä»¥ script tag çš„æ–¹å¼å¼•å…¥æœ€ç‚ºä¿éšªã€‚</p>\n<h2 id=\"çµè«–\" style=\"position:relative;\"><a href=\"#%E7%B5%90%E8%AB%96\" aria-label=\"çµè«– permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>çµè«–</h2>\n<p>Web Component çš„å­˜åœ¨å¿…è¦é‚„æ˜¯æœ‰å¾ˆå¤šçˆ­è­°ï¼Œæˆ‘å€‹äººåå¥½å°‡å…¶é‹ç”¨åœ¨ Design System ä¸­ï¼Œç”±ä¸€å€‹å›ºå®šçš„ Team å»ç¶­è­·ï¼Œå¦‚æ­¤ä»¥ä¾†æ‰èƒ½ç™¼æ®ä»–ç›®å‰çš„æœ€å¤§åŠŸç”¨ã€‚</p>\n<p>ç”¨ Stencil é–‹ç™¼ Web Component çš„é«”é©—æŒºä¸éŒ¯çš„ï¼Œå¦‚æœä½ æœ‰æ‰‹åˆ»é custom elementsï¼Œä½ æ‡‰è©²ä¹Ÿæœƒé©šè‰·æ–¼ä»–å€‘å°‡æ•´å€‹é–‹ç™¼é«”é©—åŒ…è£¹å¾—å¾ˆå¥½ï¼Œæœ‰æ™‚é–“çš„è©±å€¼å¾—ç©ç©ï¼</p>\n<p>é€™æ¬¡æˆ‘åœ¨é–‹ç™¼çš„æ‹æ‰‹å…ƒä»¶çš„åŒæ™‚ï¼Œé™¤äº†å­¸ç¿’åˆ° Stencil çš„é–‹ç™¼æ–¹å¼å¤–ï¼Œä¹Ÿæ„å¤–ç·´ç¿’åˆ°å‹•ç•«è£½ä½œçš„ç¶“é©—ï¼ŒæŒºæœ‰è¶£çš„ï¼Œå¤§å®¶ä¹Ÿæ‹¿å€‹è‡ªå·±æƒ³åšçš„å° component ä¾†è©¦è©¦çœ‹å§ï¼ä¹Ÿæ­¡è¿è·Ÿæˆ‘åˆ†äº«å¿ƒå¾—äº’ç›¸æŒ‡æ•™ï¼</p>\n<h2 id=\"è³‡æ–™ä¾†æº\" style=\"position:relative;\"><a href=\"#%E8%B3%87%E6%96%99%E4%BE%86%E6%BA%90\" aria-label=\"è³‡æ–™ä¾†æº permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>è³‡æ–™ä¾†æº</h2>\n<ol>\n<li><a href=\"https://stenciljs.com/docs/introduction\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">StencilJS official site</a></li>\n<li><a href=\"https://codepen.io/realdennis/pen/RwNNqbj\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">emoji claps inspired by this codepen</a></li>\n</ol>","id":"0d43301a-6acf-560a-a1b6-8a606988fb21","fields":{"slug":"stenciljs-webcomponent"},"frontmatter":{"date":"2020-03-28T13:37:30.000Z","title":"åˆ©ç”¨ Stencil å»ºæ§‹ Web Component","tags":["web","stencil","JavaScript","Web Component"],"type":"tech","slug":"stenciljs-webcomponent"},"timeToRead":12},"type":"tech"}},"staticQueryHashes":["2123680655"]}