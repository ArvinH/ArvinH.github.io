<!DOCTYPE html><html lang="zh-TW"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><script src="https://unpkg.com/claps-button@1.1.9/dist/claps-button/claps-button.js" defer=""></script><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:112.5%/1.66 'huninn, Consolas, Monaco, Andale Mono, Ubuntu Mono, monospace, Open Sans',sans-serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'huninn, Consolas, Monaco, Andale Mono, Ubuntu Mono, monospace, Open Sans',sans-serif;font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;color:inherit;font-family:'huninn',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;color:inherit;font-family:'huninn',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;color:inherit;font-family:'huninn',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;color:inherit;font-family:'huninn',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;color:inherit;font-family:'huninn',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;color:inherit;font-family:'huninn',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;}ul{margin-left:1.66rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.66rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;font-size:0.85rem;line-height:1.66rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;font-size:1rem;line-height:1.66rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;}blockquote{margin-left:1.66rem;margin-right:1.66rem;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.66rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.66rem;}b{font-weight:bold;}strong{font-weight:bold;}dt{font-weight:bold;}th{font-weight:bold;}li{margin-bottom:calc(1.66rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.66rem;margin-bottom:calc(1.66rem / 2);margin-top:calc(1.66rem / 2);}li > ul{margin-left:1.66rem;margin-bottom:calc(1.66rem / 2);margin-top:calc(1.66rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.66rem / 2);}code{font-size:0.85rem;line-height:1.66rem;}kbd{font-size:0.85rem;line-height:1.66rem;}samp{font-size:0.85rem;line-height:1.66rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.10667rem;padding-right:1.10667rem;padding-top:0.83rem;padding-bottom:calc(0.83rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}</style><style data-href="/styles.0b66d3bb015bd0f3a317.css" id="gatsby-global-css">code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:break-word;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal;color:#dc143c;background-color:#f7f7f9;border:1px solid #e1e1e8;border-radius:4px}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#f8f8f2}.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><meta name="generator" content="Gatsby 2.32.13"/><title data-react-helmet="true">[筆記] 了解 WebAssembly 的基礎使用方法 | Well in Time</title><meta data-react-helmet="true" name="description"/><meta data-react-helmet="true" name="image" content="https://blog.arvinh.info/assets/banner.jpg"/><meta data-react-helmet="true" property="og:locale" content="en_US"/><meta data-react-helmet="true" property="og:site_name" content="shouhan.huang"/><meta data-react-helmet="true" property="og:url" content="https://blog.arvinh.infowebassembly-js-future"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="[筆記] 了解 WebAssembly 的基礎使用方法"/><meta data-react-helmet="true" property="og:description"/><meta data-react-helmet="true" property="og:image" content="https://blog.arvinh.info/assets/banner.jpg"/><meta data-react-helmet="true" property="fb:app_id" content=""/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:creator" content="@ArvinHv"/><meta data-react-helmet="true" name="twitter:title" content="[筆記] 了解 WebAssembly 的基礎使用方法"/><meta data-react-helmet="true" name="twitter:url" content="https://blog.arvinh.info"/><meta data-react-helmet="true" name="twitter:description"/><meta data-react-helmet="true" name="twitter:image" content="https://blog.arvinh.info/assets/banner.jpg"/><script data-react-helmet="true" type="application/ld+json">[{"@context":"http://schema.org","@type":"BlogPosting","@id":"https://blog.arvinh.infowebassembly-js-future","url":"https://blog.arvinh.infowebassembly-js-future","name":"[筆記] 了解 WebAssembly 的基礎使用方法","alternateName":"ArvinHuang Blog","headline":"[筆記] 了解 WebAssembly 的基礎使用方法","image":{"@type":"ImageObject","url":"https://blog.arvinh.info/assets/banner.jpg"},"description":"Blog by Arvin Huang","datePublished":"06-17-2017","dateModified":"06-17-2017","author":{"@type":"Person","name":"Arvin Huang"},"publisher":{"@type":"Organization","name":"Arvin Huang","logo":{"@type":"ImageObject","url":"https://blog.arvinh.info/assets/the-flash.png"}},"isPartOf":"https://blog.arvinh.info/","mainEntityOfPage":{"@type":"WebSite","@id":"https://blog.arvinh.info/"}}]</script><style data-styled="djgdom ftpFlP fKPmXx KMFWk hPuMhU hxtxEj gkQvdW hAIAZs gyVwsS bViSNY iwaAAv dgoloc jaJIqd" data-styled-version="4.4.1">
/* sc-component-id: Subline-sc-1j7ecob-0 */
.KMFWk{font-size:1rem;color:rgba(255,255,255,0.7);}.hPuMhU{font-size:1rem;}
/* sc-component-id: Header__HeaderWrapper-sc-hx5adu-0 */
.djgdom{position:relative;background:linear-gradient( -185deg,rgba(0,0,0,1),rgba(26,26,26,0.8) ),no-repeat;background-size:cover;padding:8rem 2rem 10rem;text-align:center;} .djgdom::after{background:transparent url(/assets/mask.svg) no-repeat bottom left;background-size:101%;bottom:-2px;content:'';display:block;height:100%;left:0;position:absolute;width:100%;} .djgdom canvas{height:30rem;} @media (max-width:1200px){.djgdom{padding:4rem 2rem 6rem;}.djgdom canvas{height:20rem;}} @media (max-width:600px){.djgdom{padding:1rem 0.5rem 2rem;}.djgdom canvas{height:20rem;}}
/* sc-component-id: Header__Content-sc-hx5adu-1 */
.ftpFlP{position:relative;z-index:999;} .ftpFlP a{color:white;font-size:1.5rem;} .ftpFlP a:hover{opacity:0.85;color:white;}
/* sc-component-id: sc-global-2499766704 */
@font-face{font-family:"huninn";src:url("../../static/assets/font/jf-openhuninn-1.0.ttf") format("ttf");} ::selection{color:#fff;background:#000;} body{background:#fff;color:rgba(0,0,0,0.7);} @media (max-width:600px){body{font-size:16px;}} a{color:rgba(0,0,0,0.9);-webkit-text-decoration:none;text-decoration:none;-webkit-transition:all 0.5s;transition:all 0.5s;} a:hover{color:#000;} h1,h2,h3,h4{color:rgba(0,0,0,0.9);} blockquote{font-style:italic;position:relative;} blockquote:before{content:"";position:absolute;background:#000;height:100%;width:6px;margin-left:-1.6rem;} label{margin-bottom:.5rem;color:rgba(0,0,0,0.9);} input,textarea{border-radius:.5rem;border:none;background:rgba(0,0,0,0.05);padding:.25rem 1rem;} input:focus,textarea:focus{outline:none;} .textRight{text-align:right;}
/* sc-component-id: Layout__Footer-sc-usm79k-0 */
.jaJIqd{text-align:center;padding:3rem 0;} .jaJIqd span{font-size:0.75rem;}
/* sc-component-id: PrevNext__Wrapper-sc-ye374r-0 */
.gyVwsS{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin:6rem auto 0 auto;justify-items:center;} .gyVwsS a{color:#000;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}
/* sc-component-id: PrevNext__Prev-sc-ye374r-1 */
.bViSNY span{text-transform:uppercase;font-size:0.8rem;color:rgba(0,0,0,0.5);}
/* sc-component-id: PrevNext__Next-sc-ye374r-2 */
.iwaAAv{margin-left:auto;text-align:right;} .iwaAAv span{text-transform:uppercase;font-size:0.8rem;color:rgba(0,0,0,0.5);}
/* sc-component-id: SectionTitle-sc-nmmvjh-0 */
.fKPmXx{font-size:3rem;text-transform:normal;text-align:center;color:#fff;position:relative;padding:2rem 0 0;margin-bottom:2rem;} .fKPmXx:after{content:'';height:1px;width:50px;position:absolute;bottom:0;left:50%;margin-left:-25px;background:#fff;} @media (max-width:600px){.fKPmXx{font-size:2rem;}}
/* sc-component-id: Content-sc-4nu7xv-0 */
.gkQvdW{position:relative;box-shadow:silver -1px 1px 10px;padding:2rem 4rem;background-color:#fff;z-index:1;margin-top:-4rem;max-width:900px;} .gkQvdW form p label,.gkQvdW form p input{display:block;} .gkQvdW form p input{min-width:275px;} .gkQvdW form p textarea{resize:vertical;min-height:150px;width:100%;} @media (max-width:1200px){.gkQvdW{padding:3rem 3rem;margin-top:-1rem;}} @media (max-width:600px){.gkQvdW{padding:2rem 1.5rem;margin-top:-1rem;}}
/* sc-component-id: ClapsButton__ClapsBtn-sc-umvb76-0 */
.dgoloc{-webkit-transition:0.3s ease-in -webkit-transform;-webkit-transition:0.3s ease-in transform;transition:0.3s ease-in transform;position:-webkit-sticky;position:sticky;margin-left:30px;z-index:2;top:200px;height:100px;display:'flex';-webkit-box-pack:'center';-webkit-justify-content:'center';-ms-flex-pack:'center';justify-content:'center';} @media (max-width:1200px){.dgoloc{display:none;}} @media (max-width:600px){.dgoloc{display:none;}} .dgoloc:hover{-webkit-transform:scale(1.2);-ms-transform:scale(1.2);transform:scale(1.2);}
/* sc-component-id: Post__PostContent-sc-18q9ljn-0 */
.hAIAZs{margin-top:2rem;} .hAIAZs p > a{border-bottom:1px dotted #000;}
/* sc-component-id: Post__PostWrapper-sc-18q9ljn-1 */
.hxtxEj{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin:0 auto;max-width:60rem;padding:0 6rem;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;} @media (max-width:1200px){.hxtxEj{padding:0 3rem;display:block;}} @media (max-width:600px){.hxtxEj{padding:0 1rem;display:block;}}</style><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= 'https://www.googletagmanager.com/gtm.js?id='+i+dl+'';f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer', 'GTM-PHF66B5');</script><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="icon" href="/favicon-32x32.png?v=152af834ef7f57ae512dcb4837612e3b" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><meta name="theme-color" content="#3498DB"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=152af834ef7f57ae512dcb4837612e3b"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=152af834ef7f57ae512dcb4837612e3b"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=152af834ef7f57ae512dcb4837612e3b"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=152af834ef7f57ae512dcb4837612e3b"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=152af834ef7f57ae512dcb4837612e3b"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=152af834ef7f57ae512dcb4837612e3b"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=152af834ef7f57ae512dcb4837612e3b"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=152af834ef7f57ae512dcb4837612e3b"/><link as="script" rel="preload" href="/webpack-runtime-f5383e67068afc3e3873.js"/><link as="script" rel="preload" href="/framework-acd7498685eeb36e39da.js"/><link as="script" rel="preload" href="/app-f8fd8dc92836b9c3a057.js"/><link as="script" rel="preload" href="/styles-7d4153d260c0197f0043.js"/><link as="script" rel="preload" href="/1bfc9850-46b0913cb4ebd5a5c7fe.js"/><link as="script" rel="preload" href="/36d7db980dae7a541009672672754f083003e725-c56e28a1a27777e490e1.js"/><link as="script" rel="preload" href="/component---src-templates-post-tsx-d3b3b36c7ce92797c901.js"/><link as="fetch" rel="preload" href="/page-data/tech/webassembly-js-future/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2123680655.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PHF66B5" height="0" width="0" style="display: none; visibility: hidden" aria-hidden="true"></iframe></noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><header class="Header__HeaderWrapper-sc-hx5adu-0 djgdom"><div class="Header__Content-sc-hx5adu-1 ftpFlP"><a href="/">Well in Time</a><div class="SectionTitle-sc-nmmvjh-0 fKPmXx">[筆記] 了解 WebAssembly 的基礎使用方法</div><div class="Subline-sc-1j7ecob-0 KMFWk">06-17-2017<!-- --> — <!-- -->16<!-- --> Min Read</div></div><div><canvas style="position:absolute;top:0;left:0;width:100%;height:100%"></canvas></div></header><div class="Wrapper-sc-dpgioq-0 Post__PostWrapper-sc-18q9ljn-1 hxtxEj"><div class="Content-sc-4nu7xv-0 gkQvdW"><div class="Post__PostContent-sc-18q9ljn-0 hAIAZs"><blockquote>
<p>~ $ man woman
~ $ man: No manual entry for woman</p>
</blockquote>
<!-- more -->
<h2 id="前言" style="position:relative;"><a href="#%E5%89%8D%E8%A8%80" aria-label="前言 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>前言</h2>
<p>時間過得很快，記得第一次聽到 WebAssembly 這個名詞是在 2015 年，小弟還在服役...當時看到的文章以聳動的標題訴說著 JavaScript 即將要被取代，各家大廠紛紛投入開發...（我就不轉貼這種文章了）害我想說是不是退役後會找不到工作...</p>
<p>還好事實總是背離記者，WebAssembly 當然不是來取代 JavaScript 的，可以看看 <a href="https://brendaneich.com/2015/06/from-asm-js-to-webassembly/" target="_blank" rel="nofollow noopener noreferrer">JavaScript 的發明人 Brendan Eich 怎麼說</a> 以及 <a href="https://www.youtube.com/watch?time_continue=1108&#x26;v=aZqhRICne_M" target="_blank" rel="nofollow noopener noreferrer">他在 Fluent conference 的 keynote</a>。</p>
<p>但即便知道 WebAssembly 並非要取代 JavaScript，我其實也還是一直搞不太懂身為開發者，到底要如何使用 WebAssembly，只知道它似乎讓 C/C++ 跑在 Browser 上這件事變成可行，也能大幅提升 JavaScript 的效能。</p>
<p>直到前陣子發現一部限時免費的教學影片 - <a href="https://egghead.io/courses/get-started-using-webassembly-wasm" target="_blank" rel="nofollow noopener noreferrer">Get Started Using WebAssembly (wasm)</a>，我才稍稍領悟了一些。這部由 <a href="https://egghead.io/instructors/guy-bedford" target="_blank" rel="nofollow noopener noreferrer">Guy Bedford</a> 製作的影片在 egghead.io 上，短短 56 分鐘，以實際範例告訴你如何使用 WebAssembly，以及與 JS 進行效能比較，也介紹了許多方便你測試的工具，有時間的話我強烈推薦把它看完，不過現在已經要是 egghead 的 pro member 才能看得到了... (作者有 open source 他所有的範例 code 在 <a href="https://github.com/guybedford/wasm-intro" target="_blank" rel="nofollow noopener noreferrer">guybedford/wasm-intro</a> 與 <a href="https://github.com/guybedford/wasm-demo" target="_blank" rel="nofollow noopener noreferrer">guybedford/wasm-demo</a>)</p>
<p>可能你沒有時間也沒有多餘的錢能付費觀看，但沒關係，希望憑著我的記憶，透過這篇文章融合一些影片的重點，讓大家快速了解 WebAssembly 是什麼，以及要如何與 JavaScript 搭配使用。</p>
<h2 id="什麼是-webassembly-wasm" style="position:relative;"><a href="#%E4%BB%80%E9%BA%BC%E6%98%AF-webassembly-wasm" aria-label="什麼是 webassembly wasm permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>什麼是 WebAssembly (wasm)？</h2>
<blockquote>
<p>WebAssembly or wasm is a new, portable, size- and load-time-efficient format suitable for compilation to the web. -- <a href="https://github.com/WebAssembly/design" target="_blank" rel="nofollow noopener noreferrer">WebAssembly Design</a></p>
</blockquote>
<ol>
<li>一種二進位表示的新語言，但有另外的 text format 可以讓你編輯與 debug。</li>
<li>Compile Target：顧名思義，只要透過特定的 Compiler，你就能將你自己慣用的語言編譯成 WebAssembly，然後執行在瀏覽器上！目前可以透過 <a href="http://kripken.github.io/emscripten-site/index.html" target="_blank" rel="nofollow noopener noreferrer">Emscripten(LLVM to JS compiler)</a> 來編譯 C/C++ 的程式。</li>
<li>提供增強 JavaScript 程式的方法：你可以將 performance critical 的程式部分用 WebAssembly 撰寫，或是用第 2 點提及的 C/C++編譯成 WebAssembly，然後像一般 import js module 一般，導入你的 JavaScript Application。透過 WebAssembly，你能夠自由控制 Memory 的存取與釋放。</li>
<li>當 Browser 能夠支援運行 WebAssembly 的時候，由於二進位格式以及事先編譯與優化的關係，勢必能夠產生比 JavaScript 運行速度更快、檔案大小更小的結果。</li>
<li>語言的安全性 WebAssembly 當然也很重視，在 JavaScript VM 中， WebAssembly 運行在一個沙箱化的執行環境，遷入 web 端運行時會強制使用 Browser 的 Same-Origin 和 permissions security policies。此外，wasm 的實作設計中更特別提及他是 <a href="https://github.com/WebAssembly/design/blob/master/Security.md#memory-safety" target="_blank" rel="nofollow noopener noreferrer">memory-safe</a> 的。</li>
<li><a href="https://github.com/WebAssembly/design/blob/master/NonWeb.md" target="_blank" rel="nofollow noopener noreferrer">Non-Web Embeddings</a>：雖然是為了 Web 設計，但也希望能在其他環境中運行，因此底層實作並沒有 require Web API，讓其擁有良好的 portability，不管是 Nodejs, IoT devices 都可使用。</li>
</ol>
<p>WebAssembly 目前由 <a href="https://www.w3.org/community/webassembly/" target="_blank" rel="nofollow noopener noreferrer">W3C Community Group</a> 設計開發，成員包含所有 major browsers 的代表。</p>
<p>WebAssembly 有許多 <a href="http://webassembly.org/docs/high-level-goals/" target="_blank" rel="nofollow noopener noreferrer">High-Level Goals</a>，目前 release 的版本主要為 <a href="http://webassembly.org/docs/mvp/" target="_blank" rel="nofollow noopener noreferrer">MVP(Minimum Viable Product)</a>，提供先前 <code class="language-text">asm.js</code> 的多數功能，並先以 C/C++ 的編譯為主。</p>
<h2 id="等等第一點就有問題了你說他是二進位表示的語言那該怎麼寫text-format-又是長什麼樣子" style="position:relative;"><a href="#%E7%AD%89%E7%AD%89%E7%AC%AC%E4%B8%80%E9%BB%9E%E5%B0%B1%E6%9C%89%E5%95%8F%E9%A1%8C%E4%BA%86%E4%BD%A0%E8%AA%AA%E4%BB%96%E6%98%AF%E4%BA%8C%E9%80%B2%E4%BD%8D%E8%A1%A8%E7%A4%BA%E7%9A%84%E8%AA%9E%E8%A8%80%E9%82%A3%E8%A9%B2%E6%80%8E%E9%BA%BC%E5%AF%ABtext-format-%E5%8F%88%E6%98%AF%E9%95%B7%E4%BB%80%E9%BA%BC%E6%A8%A3%E5%AD%90" aria-label="等等第一點就有問題了你說他是二進位表示的語言那該怎麼寫text format 又是長什麼樣子 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>等等，第一點就有問題了，你說他是二進位表示的語言，那該怎麼寫？！text format 又是長什麼樣子？</h2>
<p>問得好，這就是本篇的重點，WebAssembly 的檔案格式為 <code class="language-text">wasm</code>，舉一個例子來看，一個用 c++ 撰寫的加法函數：</p>
<div class="gatsby-highlight" data-language="cadd.c"><pre class="language-cadd.c"><code class="language-cadd.c">#include &lt;math.h&gt;
int add(int num1, int num2) {
    return num1 + num2;
}</code></pre></div>
<p>若編譯為 <code class="language-text">wasm</code> 會長這個樣子（為節省空間我轉成 Hex）：</p>
<div class="gatsby-highlight" data-language="wasmadd.wasm"><pre class="language-wasmadd.wasm"><code class="language-wasmadd.wasm">00 61 73 6d 01 00 00 00  01 87 80 80 80 00 01 60
02 7f 7f 01 7f 03 82 80  80 80 00 01 00 04 84 80
80 80 00 01 70 00 00 05  83 80 80 80 00 01 00 01
06 81 80 80 80 00 00 07  95 80 80 80 00 02 06 6d
65 6d 6f 72 79 02 00 08  5f 5a 33 61 64 64 69 69
00 00 0a 8d 80 80 80 00  01 87 80 80 80 00 00 20
01 20 00 6a 0b</code></pre></div>
<p>當然我們很難去編輯這樣的東西，所以有另一種 <strong>text format</strong> 叫做 <code class="language-text">wast</code>，上述的 .wasm 轉成 .wast 後：</p>
<div class="gatsby-highlight" data-language="wastadd.wast"><pre class="language-wastadd.wast"><code class="language-wastadd.wast">(module
  (table 0 anyfunc)
  (memory $0 1)
  (export &quot;memory&quot; (memory $0))
  (export &quot;add&quot; (func $add))
  (func $add (param $0 i32) (param $1 i32) (result i32)
    (i32.add
      (get_local $1)
      (get_local $0)
    )
  )
)</code></pre></div>
<p>這樣就好懂多了，我們一行一行來解釋：</p>
<p><code class="language-text">line 1</code> 的 module 就是 WebAssembly 中一個可載入、可執行的最小單位程式，在 runtime 載入後可以產生 Instance 來執行，而這個 module 也朝著與 ES6 modules 整合的方向，也就是說以後能透過 <code class="language-text">&lt;script src="abc.wasm" type="module" /></code> 的方式載入。</p>
<p><code class="language-text">line 2 ~ 3</code> 分別宣告了兩個預設的環境變量: <code class="language-text">memory</code> 與 <code class="language-text">table</code>，memory 就是存放變數的記憶體物件，而 table 則是 WebAssembly 用來存放 function reference 的地方，在目前 MVP 的版本中，table 的 element type 只能為 <code class="language-text">anyfunc</code>。</p>
<p>接著 <code class="language-text">line 4 ~ 5</code> 把 memory 與 add function export 出去。之後在 JavaScript 中，我們可以取得這兩個被 export 出來的物件與函式。</p>
<p>最後是加法函式的宣告與實作內容，其中 <code class="language-text">get_local</code> 是 WebAssembly 中取得 memory 中 local 變數的方法。</p>
<p>不知道會不會有人好奇 i32 是什麼？i32 指的就是 32位元的整數，在 WebAssembly 的世界中，是強型態的，必須明確指定變數型態，寫習慣 JS 的要多加注意，稍後的範例會再度提及。</p>
<!-- ## 工具包 -->
<h2 id="那到底怎麼將-cc-編譯成-wasm-或-wast-呢" style="position:relative;"><a href="#%E9%82%A3%E5%88%B0%E5%BA%95%E6%80%8E%E9%BA%BC%E5%B0%87-cc-%E7%B7%A8%E8%AD%AF%E6%88%90-wasm-%E6%88%96-wast-%E5%91%A2" aria-label="那到底怎麼將 cc 編譯成 wasm 或 wast 呢 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>那到底怎麼將 C/C++ 編譯成 wasm 或 wast 呢？</h2>
<p><a href="http://webassembly.org/getting-started/developers-guide/" target="_blank" rel="nofollow noopener noreferrer">WebAssembly.org</a> 中介紹我們使用 <a href="https://github.com/kripken/emscripten" target="_blank" rel="nofollow noopener noreferrer">Emscripten</a>，Emscripten 的安裝與使用方法大家可以從官網上看到，就不贅述。</p>
<p>安裝好後執行 <code class="language-text">emcc add.c -s WASM=1 -o add.html</code> 即可，唯一要注意的是 <code class="language-text">WASM=1</code> 這個 flag 要設定，否則 <code class="language-text">emcc</code> 預設會跑 asm.js。</p>
<p>如果只是想嚐鮮一下，可能看到要安裝這些東西就會把網頁關掉了...</p>
<p>不過不用擔心！現在也已經有很方便的 online tool 可以使用：</p>
<p><a href="https://wasdk.github.io/WasmFiddle" target="_blank" rel="nofollow noopener noreferrer">WasmFiddle</a></p>
<p><img src="/image/wasmFiddle.png" alt="WasmFiddle"></p>
<!-- Fiddle 的限制 -->
<p>WasmFiddle 可以幫你把 C code 轉成 Wast 與 Wasm (可下載)，然後同時讓你直接利用 JS 進行操作，缺點是沒辦法直接更改 Wast。</p>
<p><a href="http://mbebenita.github.io/WasmExplorer/" target="_blank" rel="nofollow noopener noreferrer">WasmExplorer</a>：</p>
<p><img src="/image/wasmExplorer.png" alt="wasmExplorer"></p>
<!-- Explorer 的限制 -->
<p>WasmExplorer 一樣能幫你把 C code 編譯成 Wast 與 Wasm，並且可以編輯轉出來的 Wast，缺點是沒有 JS 能直接互動。</p>
<h3 id="所以搭配操作的流程" style="position:relative;"><a href="#%E6%89%80%E4%BB%A5%E6%90%AD%E9%85%8D%E6%93%8D%E4%BD%9C%E7%9A%84%E6%B5%81%E7%A8%8B" aria-label="所以搭配操作的流程 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>所以搭配操作的流程...</h3>
<blockquote>
<p>先 WasmFiddle 來進行測試，接著把編好的 Wast 複製到 WasmExplorer 進行你想要的編輯，接著再 compile 成 wasm 並下載下來。</p>
</blockquote>
<!-- ## 與 JS 的交互使用-->
<h2 id="知道怎麼編譯-wasm-後該說說-javascript-了吧" style="position:relative;"><a href="#%E7%9F%A5%E9%81%93%E6%80%8E%E9%BA%BC%E7%B7%A8%E8%AD%AF-wasm-%E5%BE%8C%E8%A9%B2%E8%AA%AA%E8%AA%AA-javascript-%E4%BA%86%E5%90%A7" aria-label="知道怎麼編譯 wasm 後該說說 javascript 了吧 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>知道怎麼編譯 wasm 後，該說說 JavaScript 了吧</h2>
<p>好的，但在那之前，要先提醒大家，除了 Chrome 57, Firefox 52 預設支援 WebAssembly 外，Safari 需要是紫色版本（Preview 版）才能使用，而 Edge 15 則是要開啟 Experimental JavaScript Features。</p>
<h3 id="載入-wasm-到-web-端" style="position:relative;"><a href="#%E8%BC%89%E5%85%A5-wasm-%E5%88%B0-web-%E7%AB%AF" aria-label="載入 wasm 到 web 端 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>載入 wasm 到 Web 端</h3>
<p>在 <code class="language-text">&lt;script src="abc.wasm" type="module" /></code> 還無法使用之前，想要載入 wasm 必須透過 <code class="language-text">fetch</code> API。在 <a href="https://github.com/guybedford/wasm-intro/blob/master/4-reading-wasm-memory/test.html#L4" target="_blank" rel="nofollow noopener noreferrer">Guy bedford 的影片範例</a> 與 <a href="https://github.com/mdn/webassembly-examples/blob/master/wasm-utils.js#L6" target="_blank" rel="nofollow noopener noreferrer">mdn 的 example</a> 中的寫法都差不多：</p>
<div class="gatsby-highlight" data-language="jswasm-loader.js"><pre class="language-jswasm-loader.js"><code class="language-jswasm-loader.js">function fetchAndInstantiateWasm (url, imports) {
    return fetch(url) // url could be your .wasm file
    .then(res =&gt; {
    if (res.ok)
        return res.arrayBuffer();
    throw new Error(`Unable to fetch Web Assembly file ${url}.`);
    })
    .then(bytes =&gt; WebAssembly.compile(bytes))
    .then(module =&gt; WebAssembly.instantiate(module, imports || {}))
    .then(instance =&gt; instance.exports);
}</code></pre></div>
<p>基本上會實作一個 <code class="language-text">wasm-loader</code> 之類的函式，像上面的 <code class="language-text">fetchAndInstantiateWasm</code>。</p>
<p>內容很簡單，取得 fetch 回來的 result 後，將其轉為 <code class="language-text">ArrayBuffer</code>，利用 <code class="language-text">WebAssembly.compile</code> 這個 Web API 來產生 WebAssembly Module，接著透過 <code class="language-text">WebAssembly.instantiate</code> 來產生 module instance，最後的 instance.exports 就是我們在 wasm 中 export 出來的物件或 function。</p>
<p>除了 <code class="language-text">fetch</code> 以外，<code class="language-text">WebAssembly.compile</code> 與 <code class="language-text">WebAssembly.instantiate</code> 也都是回傳 Promise。</p>
<p>這邊出現一個相信一般前端開發者也比較少看到的 <strong>ArrayBuffer</strong>。</p>
<p>ArrayBuffer 是 JavaScript 的一種 data type，用來表示 generic, fixed-length 的 binary data buffer，屬於 <strong>typed arrays</strong> 的一部分，而關於 <strong>typed arrays</strong> 雖然在 WebAssembly 中很重要，但是難以在這邊詳述，<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Typed_arrays" target="_blank" rel="nofollow noopener noreferrer">mdn 的文件</a>寫得很清楚，值得閱讀。</p>
<p>我們目前只要知道他是一個 array-like 的物件，讓我們能在 JavaScript 中存取 raw binary data，有 <code class="language-text">Int8Array</code>、<code class="language-text">Int32Array</code> 與 <code class="language-text">Float32Array</code> 等 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" target="_blank" rel="nofollow noopener noreferrer">DataView</a> 可以使用即可。（又一個名詞...DataView 提供 getter/setter API 來對 buffer 中的 data 做讀取。）</p>
<p>回到主題，如果你剛剛有先點進 <a href="https://github.com/mdn/webassembly-examples/blob/master/wasm-utils.js#L6" target="_blank" rel="nofollow noopener noreferrer">mdn 的 example</a> 看，可能會發現他怎麼沒有 <code class="language-text">WebAssembly.compile</code> 這個步驟？</p>
<p>實際上 <code class="language-text">WebAssembly.instantiate</code> 有兩種 overload 實作：</p>
<ul>
<li><code class="language-text">Promise&lt;ResultObject> WebAssembly.instantiate(bufferSource, importObject);</code></li>
<li><code class="language-text">Promise&lt;WebAssembly.Instance> WebAssembly.instantiate(module, importObject);</code></li>
</ul>
<p>差別在於，先透過 <code class="language-text">WebAssembly.compile</code> 後產生的 WebAssembly module，可以存在 indexedDB 中 cache，或是在 web workers 之間傳遞。</p>
<p>此外，WebAssembly.Instance 的第二個參數：<code class="language-text">importObject</code> 是用來傳遞 JavaScript 的參數或 function 到 WebAssembly 程式中使用，後面會有範例。 </p>
<h2 id="在-javascript-中使用-webassembly-實作的-function" style="position:relative;"><a href="#%E5%9C%A8-javascript-%E4%B8%AD%E4%BD%BF%E7%94%A8-webassembly-%E5%AF%A6%E4%BD%9C%E7%9A%84-function" aria-label="在 javascript 中使用 webassembly 實作的 function permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>在 JavaScript 中使用 WebAssembly 實作的 function</h2>
<p>有了剛剛的 <code class="language-text">fetchAndInstantiateWasm</code>，取得 WebAssembly function 很方便：</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token function">fetchAndInstantiateWasm</span><span class="token punctuation">(</span><span class="token string">'add.wasm'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">m</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 15</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>使用上就是這麼簡單！</p>
<h2 id="那能不能在-webassembly-中使用-javascript-寫的-function-呢" style="position:relative;"><a href="#%E9%82%A3%E8%83%BD%E4%B8%8D%E8%83%BD%E5%9C%A8-webassembly-%E4%B8%AD%E4%BD%BF%E7%94%A8-javascript-%E5%AF%AB%E7%9A%84-function-%E5%91%A2" aria-label="那能不能在 webassembly 中使用 javascript 寫的 function 呢 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>那能不能在 WebAssembly 中使用 JavaScript 寫的 function 呢？</h2>
<p>當然可以！就是透過方才所說的第二個參數 <code class="language-text">importObject</code>。</p>
<p>假設我們想要在剛剛的加法函數內進行 JS 的 <code class="language-text">console.log</code>：</p>
<div class="gatsby-highlight" data-language="cadd.c"><pre class="language-cadd.c"><code class="language-cadd.c">#include &lt;math.h&gt;
void consoleLog (int num);
int add(int num1, int num2) {
    int result = num1 + num2;
    consoleLog(result);
    return result;
}</code></pre></div>
<p>先宣告一個 <code class="language-text">consoleLog</code> 函式，並不需要實作他，因為這會是我們待會要從 JavaScript 那邊 import 進來的部分：</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token function">fetchAndInstantiateWasm</span><span class="token punctuation">(</span><span class="token string">'./add.wasm'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    env<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">consoleLog</span><span class="token operator">:</span> <span class="token parameter">num</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">m</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    m<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// console.log 8</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>在剛剛的 <code class="language-text">fetchAndInstantiateWasm</code> 的第二個參數中，我們定義一個 <code class="language-text">env</code> object，並傳入一個內含 console.log 的函式。<code class="language-text">env</code> 是一個特殊的 key，在剛剛的 add.c 當中，我們宣告的 <code class="language-text">void consoleLog (int num)</code> 轉換到 add.wast 時，他會當作這個函式是從 <code class="language-text">env</code> 中 import 進入的（line 2）：</p>
<div class="gatsby-highlight" data-language="wastadd.wast"><pre class="language-wastadd.wast"><code class="language-wastadd.wast">(module
  (type $FUNCSIG$vi (func (param i32)))
  (import &quot;env&quot; &quot;consoleLog&quot; (func $consoleLog (param i32)))
  // ...函數內容省略，可參考前面的範例
)</code></pre></div>
<h3 id="難道只能從-env-載入嗎" style="position:relative;"><a href="#%E9%9B%A3%E9%81%93%E5%8F%AA%E8%83%BD%E5%BE%9E-env-%E8%BC%89%E5%85%A5%E5%97%8E" aria-label="難道只能從 env 載入嗎 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>難道只能從 env 載入嗎？</h3>
<p>當然不是，我們也可以自己定義，但就要去更改 wast 檔案了，其實改過以後會發現邏輯不難懂，有讓我回味到大學修組語的感覺...</p>
<div class="gatsby-highlight" data-language="wastadd-10-20.wast"><pre class="language-wastadd-10-20.wast"><code class="language-wastadd-10-20.wast">(module
  (type $FUNCSIG$vi (func (param i32)))
  (import &quot;env&quot; &quot;consoleLog&quot; (func $consoleLog (param i32)))
  ++(import &quot;lib&quot; &quot;log&quot; (func $log (param i32)))
  (table 0 anyfunc)
  (memory $0 1)
  (export &quot;memory&quot; (memory $0))
  (export &quot;add&quot; (func $add))
  (func $add (param $0 i32) (param $1 i32) (result i32)
    (call $consoleLog // 從 env 中載入的 consoleLog
      ++(i32.add
        (tee_local $1
          (i32.add
            (get_local $1)
            (get_local $0)
          )
        )
        ++(i32.const 20) // 從 env 載入的 consoleLog 將結果多加 20
      )
    )
    ++(call $log // 從我們自己定義的 lib 中載入的 log
      ++(i32.add
        ++(get_local $1) // $1 + $0 的結果放到 $1 了，因此我們直接將 $1 + 10 即可。
        ++(i32.const 10) // 從 lib 載入的 log 會將結果多加 10
      ++)
    ++)
    (get_local $1)
  )
)</code></pre></div>
<p>前面有加號的就是我們直接在 wast 中修改的程式碼，等同於如下 C 語言的程式：</p>
<div class="gatsby-highlight" data-language="cadd.c"><pre class="language-cadd.c"><code class="language-cadd.c">#include &lt;math.h&gt;
void consoleLog (int num);
int add(int num1, int num2) {
    int result = num1 + num2;
    consoleLog(result + 20);
    log(result + 10); // 多了這個從 lib 匯入的 log 函數
    return result;
}</code></pre></div>
<p>如此一來，我們就能夠像下面這般傳遞 <code class="language-text">lib.log</code> 給我們的 wasm 使用了！</p>
<p><a class="jsbin-embed" href="http://jsbin.com/mixure/embed?html,console">WASM Test on jsbin.com</a><script src="http://static.jsbin.com/js/embed.min.js?4.0.4"></script></p>
<!-- 操作 memory -->
<h2 id="現在我知道如何在-js-與-webassembly-中互相使用函式了但前面好像有提到他還能讓你操作-memory" style="position:relative;"><a href="#%E7%8F%BE%E5%9C%A8%E6%88%91%E7%9F%A5%E9%81%93%E5%A6%82%E4%BD%95%E5%9C%A8-js-%E8%88%87-webassembly-%E4%B8%AD%E4%BA%92%E7%9B%B8%E4%BD%BF%E7%94%A8%E5%87%BD%E5%BC%8F%E4%BA%86%E4%BD%86%E5%89%8D%E9%9D%A2%E5%A5%BD%E5%83%8F%E6%9C%89%E6%8F%90%E5%88%B0%E4%BB%96%E9%82%84%E8%83%BD%E8%AE%93%E4%BD%A0%E6%93%8D%E4%BD%9C-memory" aria-label="現在我知道如何在 js 與 webassembly 中互相使用函式了但前面好像有提到他還能讓你操作 memory permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>現在我知道如何在 JS 與 WebAssembly 中互相使用函式了，但前面好像有提到他還能讓你操作 Memory?!</h2>
<p>前面範例中的 wast 都有將 memory export 出來：<code class="language-text">(export "memory" (memory $0))</code>
我們可以利用前面提及的 JavaScript Typed Array 來取得 memory buffer，並利用 TextDecoder 這個較新的 Web API 來解碼：</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> memory <span class="token operator">=</span> wasmModule<span class="token punctuation">.</span>memory<span class="token punctuation">;</span>
<span class="token keyword">const</span> strBuf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span>memory<span class="token punctuation">.</span>buffer<span class="token punctuation">,</span> wasmModule<span class="token punctuation">.</span><span class="token function">getStrOffset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextDecoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">decode</span><span class="token punctuation">(</span>strBuf<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p><a class="jsbin-embed" href="http://jsbin.com/gewayo/embed?html,console">JS Bin on jsbin.com</a><script src="http://static.jsbin.com/js/embed.min.js?4.0.4"></script></p>
<p>可以讀取到 memory，當然也能寫入：</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">writeString</span> <span class="token punctuation">(</span><span class="token parameter">str<span class="token punctuation">,</span> offset</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> strBuf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> outBuf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Uint8Array</span><span class="token punctuation">(</span>mem<span class="token punctuation">.</span>buffer<span class="token punctuation">,</span> offset<span class="token punctuation">,</span> strBuf<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> strBuf<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        outBuf<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> strBuf<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span></code></pre></div>
<p>對於 Memory 的操作部分，<a href="https://github.com/guybedford/wasm-intro" target="_blank" rel="nofollow noopener noreferrer">Guy Bedford 的範例</a>有更多介紹，包含怎麼搭配 <code class="language-text">malloc</code> 來動態調整記憶體。</p>
<!-- 效能呈現 -->
<h2 id="webassembly-對於效能的展現似乎到目前為止都沒有觸及耶" style="position:relative;"><a href="#webassembly-%E5%B0%8D%E6%96%BC%E6%95%88%E8%83%BD%E7%9A%84%E5%B1%95%E7%8F%BE%E4%BC%BC%E4%B9%8E%E5%88%B0%E7%9B%AE%E5%89%8D%E7%82%BA%E6%AD%A2%E9%83%BD%E6%B2%92%E6%9C%89%E8%A7%B8%E5%8F%8A%E8%80%B6" aria-label="webassembly 對於效能的展現似乎到目前為止都沒有觸及耶 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>WebAssembly 對於效能的展現似乎到目前為止都沒有觸及耶？</h2>
<p>要能夠展現 JavaScript 與 WebAssembly 的效能差異其實沒有那麼簡單，Guy Bedford 在影片中的範例是在螢幕上畫出多個圓圈，計算他們之間碰撞的狀況來移動，有趣的是，第一次的 Demo 中，JavaScript 的速度比 WebAssembly 實作碰撞計算的要快得多，然而在重新 optimize 演算法後，才讓 WebAssembly 的效能有大幅進展，比起 JavaScript 好上不少（同樣演算法）</p>
<p>這邊放個動態截圖給大家看，想自己跑跑看或是看程式碼的可以移駕 Guy Bedford 的 repo - <a href="https://github.com/guybedford/wasm-demo" target="_blank" rel="nofollow noopener noreferrer">Wasm Demo</a>，載下來直接就能打開 html 執行囉！(要執行這個 Demo 需要 Chrome Canary 並在 chrome://flags 中啟動 Experimental Web Platform Flag)</p>
<p><img src="/image/wasmvsjs.gif" alt="Wasm VS JS"></p>
<!-- ## 結論-->
<h2 id="結論" style="position:relative;"><a href="#%E7%B5%90%E8%AB%96" aria-label="結論 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>結論</h2>
<p>目前 wasm 在 Chrome 與 firefox 都已實作，雖然一定還會有規格上的變更，但了解一下這個勢必會影響未來 Web 開發的東西是有必要的！</p>
<p>本文也只是簡單介紹基礎的使用方法，實際上還有許多相關的議題，像是 <strong>Type Arrays</strong> 與 <strong>WebAssembly Web API</strong> 等等，都需要有所了解。甚至是如何將各種程式語言 compile 成 wasm 也是一門大學問，也有許多我沒有提及的工具可以使用（從資料來源中找得到）。</p>
<p>希望大家看完後可以對 WebAssembly 的使用方式有點概念，文中若有不清楚或是錯誤的地方也歡迎指正！</p>
<h2 id="資料來源" style="position:relative;"><a href="#%E8%B3%87%E6%96%99%E4%BE%86%E6%BA%90" aria-label="資料來源 permalink" class="anchor before"><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>資料來源</h2>
<ol>
<li><a href="http://webassembly.org/" target="_blank" rel="nofollow noopener noreferrer">WebAssembly.org</a></li>
<li><a href="https://egghead.io/courses/get-started-using-webassembly-wasm" target="_blank" rel="nofollow noopener noreferrer">Get Started Using WebAssembly (wasm)</a></li>
<li><a href="https://github.com/WebAssembly/design" target="_blank" rel="nofollow noopener noreferrer">WebAssembly Design</a></li>
<li><a href="https://www.w3.org/community/webassembly/" target="_blank" rel="nofollow noopener noreferrer">W3C Community Group</a></li>
<li><a href="https://www.w3ctech.com/topic/2024" target="_blank" rel="nofollow noopener noreferrer">WebAssembly 系列（四）WebAssembly 工作原理</a></li>
<li><a href="https://github.com/guybedford/wasm-intro" target="_blank" rel="nofollow noopener noreferrer">guybedford/wasm-intro</a></li>
<li><a href="https://github.com/guybedford/wasm-demo" target="_blank" rel="nofollow noopener noreferrer">guybedford/wasm-demo</a>)</li>
</ol></div><div class="Subline-sc-1j7ecob-0 hPuMhU">Tags:  <a href="/tags/webassembly"><strong>webassembly</strong> <!-- -->, </a><a href="/tags/javascript"><strong>javascript</strong> </a></div><div class="PrevNext__Wrapper-sc-ye374r-0 gyVwsS"><div class="PrevNext__Prev-sc-ye374r-1 bViSNY"><span>Previous</span><a href="/tech/css-houdini-custom-properties">CSS 魔術師 Houdini API 介紹</a></div><div class="PrevNext__Next-sc-ye374r-2 iwaAAv"><span>Next</span><a href="/tech/d-3-workshop-map">D3v4 工作坊 - React + D3 繪製 svg 動態路線地圖</a></div></div></div><div class="ClapsButton__ClapsBtn-sc-umvb76-0 dgoloc"><claps-button size="2rem" color="#4caf50" defaultcount="0" innercount="0"></claps-button></div></div><footer class="Layout__Footer-sc-usm79k-0 jaJIqd">© <!-- --> by Arvin Huang. All rights reserved. <br/>theme inspired by <a href="https://github.com/mhadaily/gatsby-starter-typescirpt-power-blog">@mhadaily</a> <br/><span>Last build: <!-- -->09-08-2024</span></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/tech/webassembly-js-future";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-2297ee5be43fd5eb1286.js"],"app":["/app-f8fd8dc92836b9c3a057.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-36dc033f967ae9fe9cda.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-d9ab2af5c27fd7a5fd2d.js"],"component---src-pages-about-tsx":["/component---src-pages-about-tsx-579b575027f0f6d52e19.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-5f7bbdbfe96fcee336ea.js"],"component---src-pages-now-tsx":["/component---src-pages-now-tsx-a7634cfa007275822093.js"],"component---src-templates-all-tag-tsx":["/component---src-templates-all-tag-tsx-1feb941e039298715c2a.js"],"component---src-templates-blog-tsx":["/component---src-templates-blog-tsx-09e989348f1456957b84.js"],"component---src-templates-post-tsx":["/component---src-templates-post-tsx-d3b3b36c7ce92797c901.js"],"component---src-templates-tag-tsx":["/component---src-templates-tag-tsx-065baefe03712bf9a7d1.js"]};/*]]>*/</script><script src="/polyfill-2297ee5be43fd5eb1286.js" nomodule=""></script><script src="/component---src-templates-post-tsx-d3b3b36c7ce92797c901.js" async=""></script><script src="/36d7db980dae7a541009672672754f083003e725-c56e28a1a27777e490e1.js" async=""></script><script src="/1bfc9850-46b0913cb4ebd5a5c7fe.js" async=""></script><script src="/styles-7d4153d260c0197f0043.js" async=""></script><script src="/app-f8fd8dc92836b9c3a057.js" async=""></script><script src="/framework-acd7498685eeb36e39da.js" async=""></script><script src="/webpack-runtime-f5383e67068afc3e3873.js" async=""></script></body></html>